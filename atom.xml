<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>吾爱CODE</title>
  
  <subtitle>一个执着的程序员</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.felixwee.com/"/>
  <updated>2018-03-27T16:50:27.240Z</updated>
  <id>http://www.felixwee.com/</id>
  
  <author>
    <name>魏凤安(felixwee)</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>VMWare安装Ubuntu系统</title>
    <link href="http://www.felixwee.com/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/"/>
    <id>http://www.felixwee.com/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/</id>
    <published>2018-03-27T03:01:00.000Z</published>
    <updated>2018-03-27T16:50:27.240Z</updated>
    
    <content type="html"><![CDATA[<p>作为一直使用windows系统开发的程序员来说，Linux系统看起来比较神秘，本人也不例外，为了能够了解熟悉linux系统，专门下载了虚拟机软件VMWare 14,来安装ubuntu系统。下面是安装的整个过程记录，希望能给大家起到一直指导的作用。</p><a id="more"></a><h2 id="工具下载"><a href="#工具下载" class="headerlink" title="工具下载"></a>工具下载</h2><ol><li><p>VMware Workstation 14  <a href="http://sw.bos.baidu.com/sw-search-sp/software/39fba669e1b70/VMware-workstation-full-14.1.1.28517.exe" target="_blank" rel="noopener">【下载】</a></p><p>序列号:<br>CG54H-D8D0H-H8DHY-C6X7X-N2KG6<br>ZC3WK-AFXEK-488JP-A7MQX-XL8YF<br>AC5XK-0ZD4H-088HP-9NQZV-ZG2R4<br>ZC5XK-A6E0M-080XQ-04ZZG-YF08D<br>ZY5H0-D3Y8K-M89EZ-AYPEG-MYUA8  </p></li><li><p>Ubuntu系统镜像文件 <a href="https://pan.baidu.com/s/1skXzcK1" target="_blank" rel="noopener">【下载】</a></p></li></ol><h2 id="安装VMWare-Workstation-14"><a href="#安装VMWare-Workstation-14" class="headerlink" title="安装VMWare Workstation 14"></a>安装VMWare Workstation 14</h2><p>应该软件的安装基本是点击 下一步完成，所以在此就不在赘述。</p><h2 id="在VMWare-Workstation中安装ubuntu系统"><a href="#在VMWare-Workstation中安装ubuntu系统" class="headerlink" title="在VMWare Workstation中安装ubuntu系统"></a>在VMWare Workstation中安装ubuntu系统</h2><p>1.创建新虚拟机</p><p> <img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180327235308.jpg" alt=""></p><p>2.在弹出的窗口中，选择典型（推荐），点击下一步</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180327235410.jpg" alt=""></p><p>3.在弹窗中选择 选择稍后安装系统,点击下一步</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180327235614.jpg" alt=""></p><p>4.在操作系统中选择Linux,下面选择ubuntu,点击下一步。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180327235913.jpg" alt=""></p><p>5.给虚拟机起名字，并选择存储路径，点击下一步</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180327235957.jpg" alt=""></p><p>5.调整文件大小，默认20G就够了，为了以后移动方便，选择 单个文件类型。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328000054.jpg" alt=""></p><p>6.选择自定义硬件，进行配置,选择之间下载好的iso文件。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328001546.jpg" alt=""></p><p>7.设置完成后，点击完成。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328000312.jpg" alt=""></p><p>8.回到VMWare主界面，选择刚刚创建好的虚拟机，进行启动。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328001731.jpg" alt=""></p><p>9.然后进入到下面的界面，我们选择简体，并点击 安装Install</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328002110.jpg" alt=""></p><p>10.点击继续,</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328002223.jpg" alt=""></p><p>继续<br><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328002301.jpg" alt=""></p><p>11.点击继续</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180116172102773.png" alt=""></p><p>12.双击或输入Shanghai 位置</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20160116172208839.png" alt=""></p><p>13.选择键盘布局</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20160116172249264.png" alt=""></p><p>14.设置账号和密码</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328002729.jpg" alt=""></p><p>15.正式进入安装.</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328002841.jpg" alt=""></p><p>16.安装完成后，会提示重启。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328003009.jpg" alt=""></p><p>17.重启成功后，会进入到桌面。到此安装完成。</p><p><img src="/2018/03/27/ubuntu/install_ubuntu/install_ubuntu/20180328004629.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;作为一直使用windows系统开发的程序员来说，Linux系统看起来比较神秘，本人也不例外，为了能够了解熟悉linux系统，专门下载了虚拟机软件VMWare 14,来安装ubuntu系统。下面是安装的整个过程记录，希望能给大家起到一直指导的作用。&lt;/p&gt;
    
    </summary>
    
      <category term="ubuntu" scheme="http://www.felixwee.com/categories/ubuntu/"/>
    
    
      <category term="Linux" scheme="http://www.felixwee.com/tags/Linux/"/>
    
      <category term="ubuntu" scheme="http://www.felixwee.com/tags/ubuntu/"/>
    
      <category term="VMware" scheme="http://www.felixwee.com/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>Unity调用Android的jar包</title>
    <link href="http://www.felixwee.com/2018/03/22/android/01Android%E4%B8%8EUnity%E4%BA%A4%E4%BA%92/android_unity_01/"/>
    <id>http://www.felixwee.com/2018/03/22/android/01Android与Unity交互/android_unity_01/</id>
    <published>2018-03-22T14:01:00.000Z</published>
    <updated>2018-03-21T17:25:18.318Z</updated>
    
    <content type="html"><![CDATA[<h2 id="课程内容"><a href="#课程内容" class="headerlink" title="课程内容"></a>课程内容</h2><ul><li>Android开发环境搭建</li><li>Android原生jar包创建</li><li>Unity调用Jar包</li><li>Android调用Unity</li></ul><h2 id="引语"><a href="#引语" class="headerlink" title="引语"></a>引语</h2><p>如果一个游戏，制作完成，需要在各游戏平台进行宣传，有可能接入各种平台的用户，这就需要和Android打交道，掌握Unity与android如何交互是必不可少的一项内容。</p><a id="more"></a><h2 id="讲解视频"><a href="#讲解视频" class="headerlink" title="讲解视频"></a>讲解视频</h2><video controls><br> <source id="mp4" src="unitycallandroid.mp4" type="video/mp4"><br></video><h2 id="Android原生Jar包的创建"><a href="#Android原生Jar包的创建" class="headerlink" title="Android原生Jar包的创建"></a>Android原生Jar包的创建</h2><h3 id="Eclipse操作"><a href="#Eclipse操作" class="headerlink" title="Eclipse操作"></a>Eclipse操作</h3><p>1.创建一个android项目，具体参数如下，点击下一步，直到完成:</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503164653.jpg" alt=""></p><p>2.导入unity编辑器的class.jar类库。<br>类库路径:</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\Unity5<span class="number">.4</span>\Editor\Data\PlaybackEngines\AndroidPlayer\Variations\mono\Development\Classes</span><br></pre></td></tr></table></figure><p>将此文件复制到Eclipse项目中，并右键选择添加到库。</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503172128.jpg" alt=""></p><p>添加成功后，会在引用的库中显示:</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503172153.jpg" alt=""></p><p>3.修改MainAcitivity代码.<br> 修改MainAcitivity的基类为UnityPlayerActivity.并且删除OnCreateOptionsMenu和OnCreateOptionsMenuSelected函数.</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setContentView(R.layout.activity_main);</span><br></pre></td></tr></table></figure><p>在MainActivity中添加两个函数，一个用来弹出提示，一个用来计算两个int数的和.<br> 最终代码如下:</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package weifengan.lib.libdemo;</span><br><span class="line"></span><br><span class="line">import com.unity3d.player.UnityPlayerActivity;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MainActivity</span> <span class="title">extends</span> <span class="title">UnityPlayerActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span>(<span class="params">Bundle savedInstanceState</span>) </span>&#123;</span><br><span class="line">super.onCreate(savedInstanceState);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//弹出消息提示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Show</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">Toast.makeText(getApplicationContext(), <span class="string">"这是一条提示信息"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.修改AndroidManifest.xml文件，将Activity使用全名称填写.</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503173318.jpg" alt=""></p><p>5.项目上右击，选择导出(Export…)项，选择Java中的jar文件包。</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503173407.jpg" alt="">  </p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503173442.jpg" alt=""></p><p>选择要导出的资源只选择Res和src文件夹.</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503173927.jpg" alt=""></p><p>最终等到jar文件，到此Eclipse打jar包完成。</p><h3 id="Unity操作"><a href="#Unity操作" class="headerlink" title="Unity操作"></a>Unity操作</h3><p>1.新建Unity项目，并切换平台到Android平台，在Assets目录下创建Plugins文件夹，里面创建Android文件夹。<br>2.找到Eclipse项目，将文件夹assets,res,src,AndroidManifest.xml文件，全部复制到Android目录下。</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503174532.jpg" alt=""></p><p>3.创建C#脚本挂到场景中任意对象上，并编写程序调用Android中定义的函数</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">*  文 件 名: CallDemo</span></span><br><span class="line"><span class="comment">*  描    述：</span></span><br><span class="line"><span class="comment">*  作　　者: 魏凤安</span></span><br><span class="line"><span class="comment">*  Q     Q: 1327797237</span></span><br><span class="line"><span class="comment">*  手机号码: 17746514110</span></span><br><span class="line"><span class="comment">*  电子邮箱: felixwee@163.com</span></span><br><span class="line"><span class="comment">*  博客地址: http://www.felixwee.com/</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CallDemo</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//在Unity创建两个按钮，点击后分别调用下面的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowTip</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//获取UNityPlayer类</span></span><br><span class="line">        AndroidJavaClass jc = <span class="keyword">new</span> AndroidJavaClass(<span class="string">"com.unity3d.player.UnityPlayer"</span>);</span><br><span class="line">        AndroidJavaObject jo = jc.GetStatic&lt;AndroidJavaObject&gt;(<span class="string">"currentActivity"</span>);</span><br><span class="line">        jo.Call(<span class="string">"Show"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.打开发布设置，在设置中设定好相关参数,如果参数设置与Ecipse不同，则可能导致出错。</p><p><img src="/2018/03/22/android/01Android与Unity交互/android_unity_01/20170503175905.jpg" alt=""></p><p>5.设置完成后，进行apk导出，然后在Android手机上进行测试吧。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;课程内容&quot;&gt;&lt;a href=&quot;#课程内容&quot; class=&quot;headerlink&quot; title=&quot;课程内容&quot;&gt;&lt;/a&gt;课程内容&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Android开发环境搭建&lt;/li&gt;
&lt;li&gt;Android原生jar包创建&lt;/li&gt;
&lt;li&gt;Unity调用Jar包&lt;/li&gt;
&lt;li&gt;Android调用Unity&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;引语&quot;&gt;&lt;a href=&quot;#引语&quot; class=&quot;headerlink&quot; title=&quot;引语&quot;&gt;&lt;/a&gt;引语&lt;/h2&gt;&lt;p&gt;如果一个游戏，制作完成，需要在各游戏平台进行宣传，有可能接入各种平台的用户，这就需要和Android打交道，掌握Unity与android如何交互是必不可少的一项内容。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://www.felixwee.com/categories/Android/"/>
    
    
      <category term="Unity" scheme="http://www.felixwee.com/tags/Unity/"/>
    
      <category term="Android" scheme="http://www.felixwee.com/tags/Android/"/>
    
      <category term="调用Jar" scheme="http://www.felixwee.com/tags/%E8%B0%83%E7%94%A8Jar/"/>
    
  </entry>
  
  <entry>
    <title>UGUI中实现图片的灰度显示效果</title>
    <link href="http://www.felixwee.com/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/"/>
    <id>http://www.felixwee.com/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/</id>
    <published>2018-03-20T03:01:00.000Z</published>
    <updated>2018-03-27T14:22:15.466Z</updated>
    
    <content type="html"><![CDATA[<h2 id="UGUI灰度图实现法"><a href="#UGUI灰度图实现法" class="headerlink" title="UGUI灰度图实现法"></a>UGUI灰度图实现法</h2><p>UGUI的image组件上有材质球插槽，那么很显然可以从这里入手，然后编写shader，挂载上去效果就出来了。<br>原图：</p><p><img src="/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/002wvREMgy6RcYPUsv567690.png" alt=""></p><p>灰色效果：</p><p><img src="/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/002wvREMgy6RcYQsGul61690.png" alt=""></p><a id="more"></a><p>Blending的渲染顺序：</p><p><img src="/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/002wvREMgy6Rd06GM1zf1.png" alt=""></p><p>新建一个shader，增加融合和变灰的代码即可。<br>通过这样的一个小例子，可以发现UGUI比NGUI在处理UI界面时，更容易通过shader去做一些效果。</p><h2 id="shader代码："><a href="#shader代码：" class="headerlink" title="shader代码："></a>shader代码：</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Shader <span class="string">"UI/Default Grey"</span>     </span><br><span class="line">&#123;     </span><br><span class="line">    Properties     </span><br><span class="line">    &#123;     </span><br><span class="line">        [<span class="meta">PerRendererData</span>] _MainTex (<span class="string">"Sprite Texture"</span>, <span class="number">2</span>D) = <span class="string">"white"</span> &#123;&#125;     </span><br><span class="line">        _Color (<span class="string">"Tint"</span>, Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)  </span><br><span class="line">    &#125;     </span><br><span class="line"></span><br><span class="line">    SubShader     </span><br><span class="line">    &#123;     </span><br><span class="line">        Tags     </span><br><span class="line">        &#123;      </span><br><span class="line">            <span class="string">"Queue"</span>=<span class="string">"Transparent"</span>      </span><br><span class="line">            <span class="string">"IgnoreProjector"</span>=<span class="string">"True"</span>      </span><br><span class="line">            <span class="string">"RenderType"</span>=<span class="string">"Transparent"</span>      </span><br><span class="line">            <span class="string">"PreviewType"</span>=<span class="string">"Plane"</span>     </span><br><span class="line">            <span class="string">"CanUseSpriteAtlas"</span>=<span class="string">"True"</span>     </span><br><span class="line">        &#125;     </span><br><span class="line">        <span class="comment">// 源rgba*源a + 背景rgba*(1-源A值)   </span></span><br><span class="line">        Blend SrcAlpha OneMinusSrcAlpha  </span><br><span class="line"></span><br><span class="line">        Pass     </span><br><span class="line">        &#123;     </span><br><span class="line">            CGPROGRAM     </span><br><span class="line">            <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert     </span></span><br><span class="line">            <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag     </span></span><br><span class="line">            <span class="meta">#include "UnityCG.cginc"     </span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">struct</span> appdata_t     </span><br><span class="line">            &#123;     </span><br><span class="line">                float4 vertex   : POSITION;     </span><br><span class="line">                float4 color    : COLOR;     </span><br><span class="line">                float2 texcoord : TEXCOORD0;     </span><br><span class="line">            &#125;;     </span><br><span class="line"></span><br><span class="line">            <span class="keyword">struct</span> v2f     </span><br><span class="line">            &#123;     </span><br><span class="line">                float4 vertex   : SV_POSITION;     </span><br><span class="line">                fixed4 color    : COLOR;     </span><br><span class="line">                half2 texcoord  : TEXCOORD0;     </span><br><span class="line">            &#125;;     </span><br><span class="line"></span><br><span class="line">            sampler2D _MainTex;       </span><br><span class="line">            fixed4 _Color;     </span><br><span class="line"></span><br><span class="line">            <span class="function">v2f <span class="title">vert</span>(<span class="params">appdata_t IN</span>)     </span></span><br><span class="line"><span class="function">            </span>&#123;     </span><br><span class="line">                v2f OUT;     </span><br><span class="line">                OUT.vertex = mul(UNITY_MATRIX_MVP, IN.vertex);     </span><br><span class="line">                OUT.texcoord = IN.texcoord;     </span><br><span class="line">                <span class="meta">#ifdef UNITY_HALF_TEXEL_OFFSET     </span></span><br><span class="line">                     OUT.vertex.xy -= (_ScreenParams.zw<span class="number">-1.0</span>);     </span><br><span class="line">                <span class="meta">#<span class="meta-keyword">endif</span>     </span></span><br><span class="line">                OUT.color = IN.color * _Color;     </span><br><span class="line">                <span class="keyword">return</span> OUT;  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            <span class="function">fixed4 <span class="title">frag</span>(<span class="params">v2f IN</span>) : SV_Target     </span></span><br><span class="line"><span class="function">            </span>&#123;     </span><br><span class="line">                <span class="comment">//获取贴图的颜色值</span></span><br><span class="line">                half4 color = tex2D(_MainTex, IN.texcoord) * IN.color;     </span><br><span class="line">                <span class="comment">//通过灰度计算公式，得到灰度值</span></span><br><span class="line">                <span class="keyword">float</span> grey = dot(color.rgb, fixed3(<span class="number">0.22</span>, <span class="number">0.707</span>, <span class="number">0.071</span>));   </span><br><span class="line">                <span class="comment">//返回将计算好的灰度值</span></span><br><span class="line">                <span class="keyword">return</span> half4(grey,grey,grey,color.a);     </span><br><span class="line">            &#125;     </span><br><span class="line">            ENDCG     </span><br><span class="line">        &#125;     </span><br><span class="line">    &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;UGUI灰度图实现法&quot;&gt;&lt;a href=&quot;#UGUI灰度图实现法&quot; class=&quot;headerlink&quot; title=&quot;UGUI灰度图实现法&quot;&gt;&lt;/a&gt;UGUI灰度图实现法&lt;/h2&gt;&lt;p&gt;UGUI的image组件上有材质球插槽，那么很显然可以从这里入手，然后编写shader，挂载上去效果就出来了。&lt;br&gt;原图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/002wvREMgy6RcYPUsv567690.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;灰色效果：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2018/03/20/ugui/ugui_grey_ui/ugui_grey_ui/002wvREMgy6RcYQsGul61690.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="UGUI" scheme="http://www.felixwee.com/categories/UGUI/"/>
    
    
      <category term="Unity" scheme="http://www.felixwee.com/tags/Unity/"/>
    
      <category term="UGUI" scheme="http://www.felixwee.com/tags/UGUI/"/>
    
      <category term="禁用效果" scheme="http://www.felixwee.com/tags/%E7%A6%81%E7%94%A8%E6%95%88%E6%9E%9C/"/>
    
      <category term="灰度效果" scheme="http://www.felixwee.com/tags/%E7%81%B0%E5%BA%A6%E6%95%88%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>Unity中GL基础-直线，三角形，四边形</title>
    <link href="http://www.felixwee.com/2018/03/19/unity/gl_basic/gl_basic/"/>
    <id>http://www.felixwee.com/2018/03/19/unity/gl_basic/gl_basic/</id>
    <published>2018-03-19T14:01:00.000Z</published>
    <updated>2018-03-21T17:36:13.726Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-什么是GL"><a href="#1-什么是GL" class="headerlink" title="1.什么是GL"></a>1.什么是GL</h2><p>GL(Graphics Library)是底层图像库，主要是可以使用程序来绘制2D或者3D图形。绘制出来的2D或者3D图形都是以面的形式渲染。</p><p>2D图形与3D图形的区别是2D图形在所有3D物体的上方，不会随摄像机的移动而改变，而3D图形会根据摄像机的移动而移动。绘制2D图形需要用到GL库 中的LoadOrtho方法，该方法的作用是做一个正交投影变换，将图形映射在屏幕中，而绘制3D图形与绘制2D唯一不同的是无需调用LoadOrtho方法。</p><p>GL可以绘制线段、三角形、三角形带(前三个点组成一个简单三角形，第四个点和前面两个点组成三角形，依次类推)和四边形。</p><a id="more"></a><p>值得注意的是，需要将绘制的内容写在OnPostRender方法中，该方法由系统调用，无法手动调用。只有将绘制图形的脚本<br>附于相机并启用时才会调用该方法，否则无法显示绘制的图形。</p><h2 id="2-绘制直线"><a href="#2-绘制直线" class="headerlink" title="2.绘制直线"></a>2.绘制直线</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DrawLineDemo</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Material mat;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use this for initialization</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        mat = <span class="keyword">new</span> Material(<span class="string">"Shader \"Lines/Colored Blended\" &#123;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"SubShader &#123; Pass &#123;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"   BindChannels &#123; Bind \"Color\",color &#125;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"   Blend SrcAlpha OneMinusSrcAlpha"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"   ZWrite Off Cull Off Fog &#123; Mode Off &#125;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"&#125; &#125; &#125;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnPostRender</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        GL.PushMatrix();</span><br><span class="line">        mat.SetPass(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//绘制2D线段，注释掉GL.LoadOrtho();则绘制3D图形</span></span><br><span class="line">        GL.LoadOrtho();</span><br><span class="line">        <span class="comment">//开始绘制直线类型，需要两个顶点</span></span><br><span class="line">        GL.Begin(GL.LINES);</span><br><span class="line">        <span class="comment">//绘制起点，绘制的点需在Begin和End之间</span></span><br><span class="line">        GL.Vertex3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        GL.End();</span><br><span class="line">        GL.PopMatrix();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/03/19/unity/gl_basic/gl_basic/画线段.jpg" alt=""></p><h2 id="2-绘制三角形"><a href="#2-绘制三角形" class="headerlink" title="2.绘制三角形"></a>2.绘制三角形</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DrawTriangle</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Material mat;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        mat = <span class="keyword">new</span> Material(<span class="string">"Shader \"Lines/Colored Blended\" &#123;"</span> +</span><br><span class="line"></span><br><span class="line"><span class="string">"SubShader &#123; Pass &#123;"</span> +</span><br><span class="line"></span><br><span class="line"><span class="string">"   BindChannels &#123; Bind \"Color\",color &#125;"</span> +</span><br><span class="line"></span><br><span class="line"><span class="string">"   Blend SrcAlpha OneMinusSrcAlpha"</span> +</span><br><span class="line"></span><br><span class="line"><span class="string">"   ZWrite Off Cull Off Fog &#123; Mode Off &#125;"</span> +</span><br><span class="line"></span><br><span class="line"><span class="string">"&#125; &#125; &#125;"</span>);</span><br><span class="line"></span><br><span class="line">        mat.hideFlags = HideFlags.HideAndDontSave;</span><br><span class="line"></span><br><span class="line">        mat.shader.hideFlags = HideFlags.HideAndDontSave;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.Log(<span class="string">"press mousedown"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DrawATriangle</span>(<span class="params"> Material mat</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        GL.PushMatrix();</span><br><span class="line">        mat.SetPass(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        GL.LoadOrtho();</span><br><span class="line"></span><br><span class="line">        GL.Begin(GL.TRIANGLES);</span><br><span class="line"></span><br><span class="line">        GL.Vertex3(<span class="number">0.2</span>f, <span class="number">0.2</span>f, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0.3</span>f, <span class="number">0.6</span>f, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0.7</span>f, <span class="number">0.5</span>f, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        GL.End();</span><br><span class="line">        GL.PopMatrix();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnPostRender</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        DrawATriangle( mat);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2018/03/19/unity/gl_basic/gl_basic/画三角形.jpg" alt=""></p><h2 id="画四边形"><a href="#画四边形" class="headerlink" title="画四边形"></a>画四边形</h2><p>Unity中原点(0,0)是在屏幕的左下角,右上角为(1,1)<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Draw3DRect</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Material mat;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use this for initialization</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        mat = <span class="keyword">new</span> Material(<span class="string">"Shader \"Lines/Colored Blended\" &#123;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"SubShader &#123; Pass &#123;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"   BindChannels &#123; Bind \"Color\",color &#125;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"   Blend SrcAlpha OneMinusSrcAlpha"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"   ZWrite Off Cull Off Fog &#123; Mode Off &#125;"</span> +</span><br><span class="line"></span><br><span class="line">    <span class="string">"&#125; &#125; &#125;"</span>);</span><br><span class="line"></span><br><span class="line">        mat.hideFlags = HideFlags.HideAndDontSave;</span><br><span class="line"></span><br><span class="line">        mat.shader.hideFlags = HideFlags.HideAndDontSave;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update is called once per frame</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnPostRender</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        GL.PushMatrix();</span><br><span class="line">        mat.SetPass(<span class="number">0</span>);</span><br><span class="line">        GL.LoadOrtho();</span><br><span class="line">        GL.Begin(GL.QUADS);</span><br><span class="line">        GL.Color(Color.red);</span><br><span class="line">        GL.Vertex3(<span class="number">0</span>, <span class="number">0.5</span>F, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0.5</span>F, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">1</span>, <span class="number">0.5</span>F, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0.5</span>F, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        GL.Color(Color.cyan);</span><br><span class="line">        GL.Vertex3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0</span>, <span class="number">0.25</span>F, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0.25</span>F, <span class="number">0.25</span>F, <span class="number">0</span>);</span><br><span class="line">        GL.Vertex3(<span class="number">0.25</span>F, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        GL.End();</span><br><span class="line">        GL.PopMatrix();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2018/03/19/unity/gl_basic/gl_basic/GL画四边形.jpg" alt="画四边形"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-什么是GL&quot;&gt;&lt;a href=&quot;#1-什么是GL&quot; class=&quot;headerlink&quot; title=&quot;1.什么是GL&quot;&gt;&lt;/a&gt;1.什么是GL&lt;/h2&gt;&lt;p&gt;GL(Graphics Library)是底层图像库，主要是可以使用程序来绘制2D或者3D图形。绘制出来的2D或者3D图形都是以面的形式渲染。&lt;/p&gt;
&lt;p&gt;2D图形与3D图形的区别是2D图形在所有3D物体的上方，不会随摄像机的移动而改变，而3D图形会根据摄像机的移动而移动。绘制2D图形需要用到GL库 中的LoadOrtho方法，该方法的作用是做一个正交投影变换，将图形映射在屏幕中，而绘制3D图形与绘制2D唯一不同的是无需调用LoadOrtho方法。&lt;/p&gt;
&lt;p&gt;GL可以绘制线段、三角形、三角形带(前三个点组成一个简单三角形，第四个点和前面两个点组成三角形，依次类推)和四边形。&lt;/p&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="http://www.felixwee.com/categories/Unity3D/"/>
    
    
      <category term="Unity" scheme="http://www.felixwee.com/tags/Unity/"/>
    
      <category term="GL绘图" scheme="http://www.felixwee.com/tags/GL%E7%BB%98%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>Raspberry Pi无法输出声音</title>
    <link href="http://www.felixwee.com/2018/03/13/raspi/01_%E6%A0%91%E8%8E%93%E6%B4%BE%E6%B2%A1%E6%9C%89%E9%9F%B3%E9%A2%91%E8%BE%93%E5%87%BA/raspi_no_sound/"/>
    <id>http://www.felixwee.com/2018/03/13/raspi/01_树莓派没有音频输出/raspi_no_sound/</id>
    <published>2018-03-13T02:01:00.000Z</published>
    <updated>2018-03-13T14:19:09.710Z</updated>
    
    <content type="html"><![CDATA[<p>大家好，我是felixwee,今天从新安装了一个树莓派系统，安装了中文支持和输入法，但是接上音箱后，想来一个放松，放首音乐听听，结果，插上耳机去没有声音，经过度娘的帮助 ，找到了答案。在些做一记录。</p><p>实际上raspberry pi内置了两种音频输出模式，分别是:</p><ul><li>HDMI</li><li>耳机接口。</li></ul><p>耳机孔没有声音的原因是音频输出采用的是HDMI方式，所以只需要进行一个切换就OK了。<br><a id="more"></a></p><p>这里有两种方式进行修改：</p><h3 id="1-通过命令行修改"><a href="#1-通过命令行修改" class="headerlink" title="1.通过命令行修改"></a>1.通过命令行修改</h3><p>amixer，是alsamixer的文本模式,即命令行模式，需要用amixer命令的形式去配置你的声卡的各个选项。</p><p>打开终端,输入下面命令将会切换到耳机孔输出模式<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amixer cset numid=<span class="number">3</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></p><p>这里将输出设置为2，也就是HDMI。<br>将输出设置为1将切换到模拟信号（也就是耳机接口）。<br>默认的设置为0，代表自动选择。  </p><h3 id="2-通过raspi设置"><a href="#2-通过raspi设置" class="headerlink" title="2.通过raspi设置"></a>2.通过raspi设置</h3><p>在命令行中输入raspi-config打开raspi-config工具:</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo raspi-config</span><br></pre></td></tr></table></figure><p>在打开界面中，选中【Advanced Options】按回车：</p><p><img src="/2018/03/13/raspi/01_树莓派没有音频输出/raspi_no_sound/20180313220435569.jpg" alt=""></p><p>进入后，选择【Audio】</p><p><img src="/2018/03/13/raspi/01_树莓派没有音频输出/raspi_no_sound/20180313221101302.jpg" alt=""></p><p>进入Audio后有3个选项，选择响应的项按回车就OK了。</p><p><img src="/2018/03/13/raspi/01_树莓派没有音频输出/raspi_no_sound/20180313221254152.jpg" alt=""></p><p>经过上面的折腾，总处可以播放音乐了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;大家好，我是felixwee,今天从新安装了一个树莓派系统，安装了中文支持和输入法，但是接上音箱后，想来一个放松，放首音乐听听，结果，插上耳机去没有声音，经过度娘的帮助 ，找到了答案。在些做一记录。&lt;/p&gt;
&lt;p&gt;实际上raspberry pi内置了两种音频输出模式，分别是:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HDMI&lt;/li&gt;
&lt;li&gt;耳机接口。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;耳机孔没有声音的原因是音频输出采用的是HDMI方式，所以只需要进行一个切换就OK了。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Raspberry PI" scheme="http://www.felixwee.com/categories/Raspberry-PI/"/>
    
    
      <category term="Raspberry" scheme="http://www.felixwee.com/tags/Raspberry/"/>
    
      <category term="嵌入式" scheme="http://www.felixwee.com/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Unity调用AndroidStudio导出的Jar包</title>
    <link href="http://www.felixwee.com/2018/03/11/unity/AndroidStudio%E5%AF%BC%E5%87%BAJar%E5%8C%85%E4%B8%8EUnity%E4%BA%A4%E4%BA%92/AndroidStudio%E5%AF%BC%E5%87%BAJar%E5%8C%85%E4%B8%8EUnity%E4%BA%A4%E4%BA%92/"/>
    <id>http://www.felixwee.com/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/</id>
    <published>2018-03-11T02:01:00.000Z</published>
    <updated>2018-03-10T17:11:08.231Z</updated>
    
    <content type="html"><![CDATA[<h2 id="课程内容"><a href="#课程内容" class="headerlink" title="课程内容"></a>课程内容</h2><ul><li>制作步骤介绍</li><li>创建AndroidStudio工程及Jar包导出</li><li>Unity中调用Jar包函数</li></ul><h2 id="制作步骤"><a href="#制作步骤" class="headerlink" title="制作步骤"></a>制作步骤</h2><p>大致步骤如下：</p><ol><li>创建新的 Android Studio 工程</li><li>为此 Android Studio 工程创建 Android Library 类库（也就是一个 Module）（后面就是用它生成 jar）</li><li>生成 Jar</li><li>将 jar 导入 Unity 工程中的 Assets/Plugins/Android/</li><li>使用 AndroidJavaObject.Call 等方式调用</li></ol><a id="more"></a><h2 id="创建新Android-Studio-工程"><a href="#创建新Android-Studio-工程" class="headerlink" title="创建新Android Studio 工程"></a>创建新Android Studio 工程</h2><h4 id="1-设置好-名称-、-路径-、-包名"><a href="#1-设置好-名称-、-路径-、-包名" class="headerlink" title="1.设置好 名称 、 路径 、 包名"></a>1.设置好 名称 、 路径 、 包名</h4><p>这里的 Package name 只是这个 Android Studio 工程的包名，而我们需要的并不是这个工程，我们后面会在这个工程内新建一个 Android Library 类库，这个类库才是我们要导出 Jar 的对象。所以，这个 Android Studio 工程的 Application name 、Company Domain 、Package name 这三个参数可以随意填写，并不需要与正式工程相同。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-a8a272c77e65fac1.png" alt=""></p><h4 id="2-选择-SDK-版本"><a href="#2-选择-SDK-版本" class="headerlink" title="2.选择 SDK 版本"></a>2.选择 SDK 版本</h4><p>这里的意思是选择一个可兼容的最低的 Android 系统版本。自行选择，随意。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-01dff0ff3f06ba08.png" alt=""></p><h4 id="3-选择-Empty-Activity"><a href="#3-选择-Empty-Activity" class="headerlink" title="3.选择 Empty Activity"></a>3.选择 Empty Activity</h4><p>直接选择空的 Activity 就可以了，因为这个是本工程的 Activity，并不是我们要导出的 Jar 的 Activity。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-cdc87b3ef67e72dc.png" alt=""></p><h4 id="4-给此-Activity-定义参数"><a href="#4-给此-Activity-定义参数" class="headerlink" title="4.给此 Activity 定义参数"></a>4.给此 Activity 定义参数</h4><p>同样，因为这个是本工程的 Activity，并不是我们要导出的 Jar 的 Activity。所以随意填写，和要导出的 Jar 无关。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-aaa693d0ae3f81ed.png" alt=""></p><h4 id="5-新建-Module"><a href="#5-新建-Module" class="headerlink" title="5.新建 Module"></a>5.新建 Module</h4><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-2be33ab0444b96b1.png" alt=""></p><h4 id="6-选择-Android-Library"><a href="#6-选择-Android-Library" class="headerlink" title="6.选择 Android Library"></a>6.选择 Android Library</h4><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-4fd0fd7a392fcbeb.png" alt=""></p><h4 id="7-输入-Module-的参数"><a href="#7-输入-Module-的参数" class="headerlink" title="7.输入 Module 的参数"></a>7.输入 Module 的参数</h4><p>这里的参数就是要导出 jar 的 Android Library 类库参数。Package name 与正式工程一致。 Application/Library name 就是就填你要导出的 jar 插件的名称。Module name 自动填写就不用管了。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-a42b0cbb4a8685d5.png" alt=""></p><h4 id="8-导入Unity的classes-jar"><a href="#8-导入Unity的classes-jar" class="headerlink" title="8.导入Unity的classes.jar"></a>8.导入Unity的classes.jar</h4><p>找到 Unity 中的 classes.jar 导入到这个 Module 的 libs 中。classes.jar 在安装路径的相对路径如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\Editor\Data\PlaybackEngines\AndroidPlayer\Variations\mono\Release\Classes\classes.jar</span><br></pre></td></tr></table></figure><p><strong>（Project 视图下可以看到 libs 文件夹）</strong></p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-e67658c514e06467.png" alt=""></p><h4 id="9-把-classes-jar-加入依赖。点击-File-gt-Project-Structure"><a href="#9-把-classes-jar-加入依赖。点击-File-gt-Project-Structure" class="headerlink" title="9.把 classes.jar 加入依赖。点击 File-&gt;Project Structure"></a>9.把 classes.jar 加入依赖。点击 File-&gt;Project Structure</h4><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-346cf1f218345413.png" alt=""></p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-9b7171a4887fc019.png" alt=""></p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-2313fe7fc1b69636.png" alt=""></p><p>Modules 选择自己新建的 Android Library，中间栏点 Dependencies 标签，然后点击右侧加号+，选择 File Dependency，(新版本Android Studio中为:jar Dependency) 然后找到自己拷贝进来的在 libs 目录下的 classes.jar 点击OK</p><h4 id="10-给-Module-添加-Activity-Class"><a href="#10-给-Module-添加-Activity-Class" class="headerlink" title="10.给 Module 添加 Activity Class"></a>10.给 Module 添加 Activity Class</h4><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-3ae6bd3cb4fe1d99.png" alt=""></p><p>给新建的 Class 命名。输入 Name 然后点击 OK。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-6dbbf9d6fa1fad42.png" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myjar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.unity3d.player.UnityPlayerActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivity</span>  <span class="keyword">extends</span> <span class="title">UnityPlayerActivity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle bundle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(bundle);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShareText</span><span class="params">(String message, String body)</span> </span>&#123;</span><br><span class="line">        Intent sharingIntent = <span class="keyword">new</span> Intent(android.content.Intent.ACTION_SEND);</span><br><span class="line">        sharingIntent.setType(<span class="string">"text/plain"</span>);</span><br><span class="line">        sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, message);</span><br><span class="line">        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, body);</span><br><span class="line">        startActivity(Intent.createChooser(sharingIntent, <span class="string">"Share via"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-修改-build-gradle"><a href="#10-修改-build-gradle" class="headerlink" title="10.修改 build.gradle"></a>10.修改 build.gradle</h4><p>双击 build.gradle，修改代码，注意修改的是自己新建的 Library 的build.gradle，不是整个 project 的 build.gradle</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-4d7d75884390ddf2.png" alt=""></p><p>在 build.gradle 末尾添加以下代码，表示添加了一个 Task 任务</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//task to export contents as jar</span></span><br><span class="line"><span class="function">task <span class="title">ExportJar</span><span class="params">(type: Copy)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//用来删除之前导出的jar文件</span></span><br><span class="line">    delete <span class="string">'release/AndroidPlugin.jar'</span></span><br><span class="line">    <span class="comment">//指定将什么内容打包到jar包中，此处为bundles/release文件内容打包进jar文件.</span></span><br><span class="line">    <span class="comment">//请确认此目录是否存在(没有relase 可选择其它，如default)</span></span><br><span class="line">    from(<span class="string">'build/intermediates/bundles/release/'</span>)</span><br><span class="line">    <span class="comment">//打包好的文件存储在Build目录下什么地方</span></span><br><span class="line">    into(<span class="string">'release/'</span>)</span><br><span class="line">    <span class="comment">//打包时要包含哪些包</span></span><br><span class="line">    include(<span class="string">'classes.jar'</span>)</span><br><span class="line">    <span class="comment">//生成生进行重命名</span></span><br><span class="line">    rename(<span class="string">'classes.jar'</span>, <span class="string">'AndroidPlugin.jar'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//执行此任务</span></span><br><span class="line">ExportJar.dependsOn(build)</span><br></pre></td></tr></table></figure><h4 id="11-刷新-gradle"><a href="#11-刷新-gradle" class="headerlink" title="11.刷新 gradle"></a>11.刷新 gradle</h4><p>一般情况下修改了 build.gradle 后，系统上方会让你 SyncNow，还可以手动刷新一下，右侧点击 Gradle 标签，选中自己的 Library，右击选择Refresh external project</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-0e4b00bdd4170065.png" alt=""></p><h4 id="12-生成-Jar"><a href="#12-生成-Jar" class="headerlink" title="12.生成 Jar"></a>12.生成 Jar</h4><p>在上一步的窗口中（Gradle projects窗口）往下翻，可以在自己的 Library 展开项的 other 的展开项中找到 exportJar ，双击，然后等待完成。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-6bf70ce14827681b.png" alt=""></p><p>然后就可以在 release 目录下面找到生成好的 jar 包了，右击这个 jar 包选择 Show in Explorer 就可以拿到这个 jar 包了。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-a264b15f665ecc26.png" alt=""></p><h2 id="Unity调用Jar包"><a href="#Unity调用Jar包" class="headerlink" title="Unity调用Jar包"></a>Unity调用Jar包</h2><h4 id="1-导入-Unity"><a href="#1-导入-Unity" class="headerlink" title="1.导入 Unity"></a>1.导入 Unity</h4><p>将拿到的 jar 放到 unity 工程的 Asset/Plugins/Android/ 目录下。没有的话就手动创建目录。</p><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-58ca22bf42de42b3.png" alt=""></p><h4 id="2-修改或添加-AndroidManifest-xml"><a href="#2-修改或添加-AndroidManifest-xml" class="headerlink" title="2.修改或添加 AndroidManifest.xml"></a>2.修改或添加 AndroidManifest.xml</h4><p>(重要，请仔细阅读，真正理解 AndroidManifest 才是最快的方式)</p><p>如果你是新工程，没有使用过其他 android 的 sdk（指的是 unity 的插件），应该是没有AndroidManifest.xml文件的，这样可以在 Asset/Plugins/Android/ 目录下新建一个 AndroidManifest.xml。</p><p>先介绍新加一个 AndroidManifest.xml</p><p><strong>需要注意:</strong><br>的就是主 activity 的 android:name 需要为 用于导出 jar 的 Library 的包名 + 我们导出的 jar 的主类名,就像下方第4行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.example.myjar.MyActivity</span><br></pre></td></tr></table></figure><p>（这个包名，其实也就是 unity 工程 Player Settings 中填写的包名，因为他们需要一致）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.VIBRATE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:icon</span>=<span class="string">"@drawable/app_icon"</span> <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.example.myjar.MyActivity"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:configChanges</span>=<span class="string">"fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改 AndroidManifest.xml</p><p>如果你之前的工程有使用过其他的 Android 的 SDK（指的是 unity 的插件），那么在 Asset/Plugins/Android/ 目录下应该已经有一个 AndroidManifest.xml，那么你就需要将这次导出的 jar 的 activity 添加到这个 AndroidManifest.xml 中进行注册。</p><p>一个 AndroidManifest.xml 只有一个主 activity （直接的观察就是这个 activity 标签中包含了下面这段标签）。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>（这里需要强调一下，本文是基于 unity 的 Android 平台的）<br>而 unity 工程，需要将继承了 UnityPlayerActivity 或者 UnityNativePlayerActivity 的 Activity （见上面第9步）为启动 Activity ，才可以在 Android 平台（说白了就是手机等等）启动你的 unity 工程。而这个 “设置为启动 Activity ” 的步骤，就是在 AndroidManifest.xml 中完成的，也就是在 AndroidManifest.xml 中将这个 Activity 注册为主 Activity 。</p><p>还有，你在 unity 中做的所有东西，发布到 Android 上，就只有一个 Activity，你如果在 unity 中唤起了其他的 Activity，就会像手机后台切应用一样的切换到你唤起的这个 Activity。所以，进行 unity 的 android 插件开发，只有一个入口，也就是继承 UnityPlayerActivity 或者 UnityNativePlayerActivity （UnityNativePlayerActivity 其实就是继承UnityPlayerActivity 的一个类，并没有进行任何操作）。</p><p>理解了这些之后，就能理解为什么一般的 unity 插件，并不会将自己的 Activity 注册成主 Activity，所以你只需要将他们的 Activity 标签复制粘贴到你的 AndroidManifest.xml（Asset/Plugins/Android/ 目录下，一个工程只需要一个 AndroidManifest.xml（多个的用法本文不涉及，你只需要知道，Asset/Plugins/Android/ 目录下仅有一个 AndroidManifest.xml 文件））中就可以了（如果他们的 Activity 标签有上面提到的 “intent-filter” 标签 也就是被标记成主 Activity，你就要考虑，他们的功能是需要在 unity 的这个主 Activity 启动就响应的，还是切换另外一个 Activity 才进行操作的）。</p><p>所以，综上，如果是你自行开发的多个 unity Android 插件（jar），就需要尽量先在 Android 层合并成一个 jar 插件包，以保证只有一个入口，一个主 Activity 。不光是自行开发的，使用其他 sdk 的时候，也要想，如果可以直接在 Android 层进行合并操作（统一一个 Activity 入口，然后所有调用其他 sdk 功能的接口全部放在这个 Activity 中）的，就尽量在 Android 层进行。</p><p>多个 unity Android 插件（jar）合并的时候，难的部分其实也不难，就是理解他们的功能，然后合并 AndroidManifest.xml 的操作。</p><h4 id="3-调用-jar-插件中的接口"><a href="#3-调用-jar-插件中的接口" class="headerlink" title="3.调用 jar 插件中的接口"></a>3.调用 jar 插件中的接口</h4><p>unity 中调用 android 层的接口基本都是通过 AndroidJavaClass 、AndroidJavaObject 的方式。<br>比如，上面我导出的 jar 插件中，在 MyActivity 类中我写了一个 ShareText(String , String ) 的接口（第9步），那么我在 unity 中就可以通过以下代码调用这个接口。</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AndroidJavaClass jc = <span class="keyword">new</span> AndroidJavaClass(<span class="string">"com.unity3d.player.UnityPlayer"</span>);</span><br><span class="line">AndroidJavaObject jo = jc.GetStatic&lt;AndroidJavaObject&gt;(<span class="string">"currentActivity"</span>);</span><br><span class="line"><span class="keyword">string</span> message = <span class="string">"this is my title"</span>;</span><br><span class="line"><span class="keyword">string</span> body = <span class="string">"this is my content"</span>;</span><br><span class="line">jo.Call(<span class="string">"ShareText"</span>, message, body);</span><br></pre></td></tr></table></figure><p>如果你需要唤起其他的 Activity，就在上方第二行，将 “currentActivity” 改成你在 AndroidManifest.xml 中注册的 Activity 名字，然后就可以通过 AndroidJavaObject.Call 的方式调用那个 Activity 类里的接口。如果这个接口在这个 Activity 类里被标记成了 static，还可以通过AndroidJavaObject.CallStatic 的方式调用。</p><p>第一行的 “com.unity3d.player.UnityPlayer” 是需要调用的接口所在的 Activity 所在的包名，如果是 unity 主 Activity ，就可以直接使用 “com.unity3d.player.UnityPlayer”，如果是其他插件包，就使用那个包的包名。</p><h4 id="4-效果"><a href="#4-效果" class="headerlink" title="4.效果"></a>4.效果</h4><p><img src="/2018/03/11/unity/AndroidStudio导出Jar包与Unity交互/AndroidStudio导出Jar包与Unity交互/5319538-47b9a4fef3c2818e.png" alt=""></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在以前eclipse是作为android开发胡主流工具，从Android Studio退出后由于功能左强大被广泛使用。本文以AndroidStudio为例，导出jar包，供Unity进行调用，这也是接入SDK的重要基础.</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>1.<a href="http://blog.csdn.net/u014230923/article/details/51363556" target="_blank" rel="noopener">Android Studio 2.1 和 Unity3D 5.3.4 交互</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;课程内容&quot;&gt;&lt;a href=&quot;#课程内容&quot; class=&quot;headerlink&quot; title=&quot;课程内容&quot;&gt;&lt;/a&gt;课程内容&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;制作步骤介绍&lt;/li&gt;
&lt;li&gt;创建AndroidStudio工程及Jar包导出&lt;/li&gt;
&lt;li&gt;Unity中调用Jar包函数&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;制作步骤&quot;&gt;&lt;a href=&quot;#制作步骤&quot; class=&quot;headerlink&quot; title=&quot;制作步骤&quot;&gt;&lt;/a&gt;制作步骤&lt;/h2&gt;&lt;p&gt;大致步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;创建新的 Android Studio 工程&lt;/li&gt;
&lt;li&gt;为此 Android Studio 工程创建 Android Library 类库（也就是一个 Module）（后面就是用它生成 jar）&lt;/li&gt;
&lt;li&gt;生成 Jar&lt;/li&gt;
&lt;li&gt;将 jar 导入 Unity 工程中的 Assets/Plugins/Android/&lt;/li&gt;
&lt;li&gt;使用 AndroidJavaObject.Call 等方式调用&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="http://www.felixwee.com/categories/Unity3D/"/>
    
    
      <category term="Unity" scheme="http://www.felixwee.com/tags/Unity/"/>
    
      <category term="SDK接入" scheme="http://www.felixwee.com/tags/SDK%E6%8E%A5%E5%85%A5/"/>
    
      <category term="Android Studio" scheme="http://www.felixwee.com/tags/Android-Studio/"/>
    
      <category term="Jar包" scheme="http://www.felixwee.com/tags/Jar%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>AR体验之Vuforia学习</title>
    <link href="http://www.felixwee.com/2017/12/09/ar/vuforia-intro/vuforia_intro/"/>
    <id>http://www.felixwee.com/2017/12/09/ar/vuforia-intro/vuforia_intro/</id>
    <published>2017-12-09T12:01:00.000Z</published>
    <updated>2018-03-09T12:51:10.746Z</updated>
    
    <content type="html"><![CDATA[<p>最近一直忙备课，没抽出时间写课件，这是一遍给同学讲高通AR插件Vuforia的课件，拿出来给大家分享一下吧，以后会不定期更新博客。本博客主要是通过扫描一张图片，显示出对应模型的例子，希望能帮到那些想学习AR知识的童鞋！<br>因为时间久了，图片和模型暂时找不到，大家随便找一张图片代替，模型直接换成经典的Cube吧。</p><a id="more"></a><h2 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h2><ul><li>能够使用Vuforia插件制作AR识别图片类型</li></ul><h2 id="Vuforia插件下载"><a href="#Vuforia插件下载" class="headerlink" title="Vuforia插件下载"></a>Vuforia插件下载</h2><ul><li>官网下载<br><a href="https://developer.vuforia.com/downloads/sdk" target="_blank" rel="noopener">https://developer.vuforia.com/downloads/sdk</a></li></ul><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226214358.jpg" alt=""></p><h2 id="Vuforia实现图片识别"><a href="#Vuforia实现图片识别" class="headerlink" title="Vuforia实现图片识别"></a>Vuforia实现图片识别</h2><p>在制作以下案例时，需要提前在Vuforia官网注册账号，具体注册细节，不在这里赘述。</p><p>1.新建项目,名称为ARDemo,导入下载的Vuforia插件。</p><p>2.新建场景，将默认的摄像机MainCamera删除，将Vuforia/Prefabs中的ARCamera和ImageTarget预置体拖动到场景中，并调整摄像机视角。</p><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226220407.jpg" alt=""></p><p>调整摄像机位置后，最终效果如图,由于还没有选择要进行识别的图片，所以当前面板还是空白的，添加完所要识别的图片后，应用会通过检测摄像头拍摄的现实世界画面，与此图进行对比。</p><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226221032.jpg" alt=""></p><p>3.由于高通的图片识别都需要先将待识别的图片上传到其内部的图片库中，所以这里我们需要先到开发者后台完成一些准备工作。</p><p> a.打开链接：开发者后台，创建一个新的Database,选择Device</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226223717.jpg" alt=""></p><p> b.在新建的Database中点击Add Target按钮添加要识别的图片文件<br> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226223910.jpg" alt=""></p><p> 选择单图片识别，并选择要就别的图片文件，添写好后，点击Add后开始上传图片<br> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226224416.jpg" alt=""></p><p> 图片上传成功后，如下图</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226224522.jpg" alt=""></p><p> c.选中刚刚创建好的Target，点击右侧按钮 Download Database(All)，从中选择Unity Editor.</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226225142.jpg" alt=""></p><p> d.点击Download后，会生成与StudyAR同名的资源包: <strong>StudyAR.unitypackage</strong>.</p><p>4.将下载的StudyAR.unitypackage资源包导入Unity，完成后返回到ImageTarget组件上的Image Target Behaviour组件，选中指定的Database中指定的Target图片。</p><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226230329.jpg" alt=""></p><p>我们可以看到ImageTarget显示我们选中的图片.</p><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226230451.jpg" alt=""></p><p>5.将要显示的3D模型拖动到ImageTarget组件下，并调整好位置及大小。</p><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226232857.jpg" alt=""></p><p>6.选中ARCamera游戏对象，打开Vuforia Behaviour组件上的Open Vuforia Configuration</p><p><img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226230740.jpg" alt=""></p><p>7.配置项<br>第一项是App License Key,这个需要在官网上进行创建。在Dev中选择License  Manager项，点击Add License Key.</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226231552.jpg" alt=""></p><p> 点击Next进行确认</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226231659.jpg" alt=""></p><p> 然后在License 列表中点击刚创建的StudyAR项，进入后即可看到Key,如下图</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226231817.jpg" alt=""></p><p> 复制后，粘贴到ARCamera上打开的配置项中的App License Key中,并将</p><p> <img src="/2017/12/09/ar/vuforia-intro/vuforia_intro/20170226232117.jpg" alt=""></p><ol><li>到此所有的操作已经完成,进行Android APK发布，然后测试可以看到效果。</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近一直忙备课，没抽出时间写课件，这是一遍给同学讲高通AR插件Vuforia的课件，拿出来给大家分享一下吧，以后会不定期更新博客。本博客主要是通过扫描一张图片，显示出对应模型的例子，希望能帮到那些想学习AR知识的童鞋！&lt;br&gt;因为时间久了，图片和模型暂时找不到，大家随便找一张图片代替，模型直接换成经典的Cube吧。&lt;/p&gt;
    
    </summary>
    
      <category term="AR" scheme="http://www.felixwee.com/categories/AR/"/>
    
    
      <category term="AR" scheme="http://www.felixwee.com/tags/AR/"/>
    
      <category term="Vuforia" scheme="http://www.felixwee.com/tags/Vuforia/"/>
    
      <category term="高通" scheme="http://www.felixwee.com/tags/%E9%AB%98%E9%80%9A/"/>
    
  </entry>
  
  <entry>
    <title>Unity操作MySQL数据库（增删改查)</title>
    <link href="http://www.felixwee.com/2017/01/17/database/00015_unity_mysql/unity_op_mysql/"/>
    <id>http://www.felixwee.com/2017/01/17/database/00015_unity_mysql/unity_op_mysql/</id>
    <published>2017-01-17T05:00:00.000Z</published>
    <updated>2018-03-10T15:59:18.762Z</updated>
    
    <content type="html"><![CDATA[<p>好久没有更新博客了，今天和大家一起分享一下数据库相关的知识。<br>&#160;&#160;&#160;&#160;最近，学习了一下SQL的常用增删改查语句，但大多是直接在navicat上直接进行，没有把实际的操作转移到Unity中，那么今天就详细的给大家讲讲，怎么在Unity中操作数据库。</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>如果想在Unity中连接MySQL数据库，需要大家提前做好准备</p><ul><li>mysql.data.dll 数据库连接类（点击<a href="mysql.data.dll"> <strong>此处</strong></a>下载)</li><li><p>调整Unity工程的发布设置中Player Settings里的参数</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170117133403.jpg" alt=""></p><p>将API Compatibility Level调整为 .Net 2.0</p><a id="more"></a></li><li><p>数据库SQL文件（点击<a href="mydb.sql"> <strong>此处</strong> </a>下载SQL文件）<br>在数据库中创建mydb数据库，并导入SQL文件。</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170118102838.jpg" alt=""></p></li></ul><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><p>对于数据库的连接，需要使用到MySQLConnnection类，通过将数据库的基本信息组装成一个字符串，然后作为参数传递给这个类。为了测试方便，我直接写到Start函数内。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/************************</span></span><br><span class="line"><span class="comment"> 配置数据库的基本信息</span></span><br><span class="line"><span class="comment">**************************/</span></span><br><span class="line"><span class="comment">//数据库服务器IP</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">string</span> host = <span class="string">"192.168.1.114"</span>;</span><br><span class="line"><span class="comment">//数据库名称</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">string</span> database = <span class="string">"mydb"</span>;</span><br><span class="line"><span class="comment">//访问数据库的用户名</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">string</span> dbuser = <span class="string">"admin"</span>;</span><br><span class="line"><span class="comment">//访问数据库的密码</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">string</span> dbpwd = <span class="string">"123"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数据库连接字符串</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">string</span> connectionString;</span><br><span class="line"><span class="comment">//数据库连接对象</span></span><br><span class="line"><span class="keyword">private</span> MySqlConnection dbConnection;</span><br><span class="line"><span class="comment">// Use this for initialization</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//创建数据库连接字符串(注意字母的大小写)</span></span><br><span class="line">        connectionString = <span class="keyword">string</span>.Format(<span class="string">"Server=&#123;0&#125;;Database=&#123;1&#125;;User ID=&#123;2&#125;;Password=&#123;3&#125;;"</span>, host, database, dbuser, dbpwd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建数据库连接对象</span></span><br><span class="line">        dbConnection = <span class="keyword">new</span> MySqlConnection(connectionString);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//打开数据库</span></span><br><span class="line">        dbConnection.Open();</span><br><span class="line">        print(<span class="string">"打开数据库成功"</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception ex)</span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">"连接数据库失败!"</span>+ex.Message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="运行Select查询语句"><a href="#运行Select查询语句" class="headerlink" title="运行Select查询语句"></a>运行Select查询语句</h2><p>这里我们定义一个方法RunSelect查询account表中所有的用户信息，具体代码如下:</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">RunSelect</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个SQL命令对象</span></span><br><span class="line">    MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(<span class="string">"select * from account"</span>, dbConnection);</span><br><span class="line">    <span class="comment">//执行命令，并将数据读取到reader中</span></span><br><span class="line">    MySqlDataReader reader = mySqlCommand.ExecuteReader();</span><br><span class="line">    <span class="comment">//如果有查询结果</span></span><br><span class="line">    <span class="keyword">if</span> (reader.HasRows)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//读取字段名</span></span><br><span class="line">        print(<span class="keyword">string</span>.Format(<span class="string">"&#123;0&#125;        &#123;1&#125;         &#123;2&#125;"</span>, reader.GetName(<span class="number">0</span>), reader.GetName(<span class="number">1</span>), reader.GetName(<span class="number">2</span>)));</span><br><span class="line">        <span class="comment">//开始读取记录</span></span><br><span class="line">        <span class="keyword">while</span> (reader.Read())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//读取字段值</span></span><br><span class="line">            print(<span class="keyword">string</span>.Format(<span class="string">"&#123;0&#125;        &#123;1&#125;         &#123;2&#125;"</span>, reader[<span class="string">"uid"</span>], reader[<span class="string">"uname"</span>], reader[<span class="string">"upwd"</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭MySQLDataReader</span></span><br><span class="line">    reader.Close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看到输出结果:</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170118104148.jpg" alt=""></p><h2 id="执行Insert语句"><a href="#执行Insert语句" class="headerlink" title="执行Insert语句"></a>执行Insert语句</h2><p>创建一个insert的SQL指令，并运行。</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">RunInsert</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个SQL命令对象</span></span><br><span class="line">    MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(<span class="string">"insert into account(uname,upwd,unick) values('user1','123','用户1');"</span>, dbConnection);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//执行命令，并将数据读取到reader中</span></span><br><span class="line">        <span class="keyword">int</span> affectRows=mySqlCommand.ExecuteNonQuery();</span><br><span class="line">        print(<span class="string">"影响行数"</span> + affectRows);</span><br><span class="line">        print(<span class="string">"数据插入成功"</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception ex)</span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">"数据插入失败!"</span>+ex.Message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Unity客户端执行结果:</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170118105843.jpg" alt=""></p><p>接下来，再看一下数据库的变化,已经能够看到新添加的user1 记录。</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170118110444.jpg" alt=""></p><h2 id="执行Update语句"><a href="#执行Update语句" class="headerlink" title="执行Update语句"></a>执行Update语句</h2><p>Update语句的方式和Insert方式类似。</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">RunUpdate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个SQL命令对象</span></span><br><span class="line">    MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(<span class="string">"update  account set unick='董丽' where uname='user1'"</span>, dbConnection);</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//执行命令，并将数据读取到reader中</span></span><br><span class="line">        <span class="keyword">int</span> affectRows = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">        print(<span class="string">"影响行数"</span> + affectRows);</span><br><span class="line">        print(<span class="string">"数据更新成功！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">"数据更新失败!"</span>+ex.Message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>数据库的变化如下:</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170118110714.jpg" alt=""></p><h2 id="执行delete语句"><a href="#执行delete语句" class="headerlink" title="执行delete语句"></a>执行delete语句</h2><p>在此处将之前插入的user1记录，从表格中删除掉。</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">RunDelete</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="comment">//创建一个SQL命令对象</span></span><br><span class="line">       MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(<span class="string">"delete  from account where uname='user1'"</span>, dbConnection);</span><br><span class="line">       <span class="keyword">try</span></span><br><span class="line">       &#123;</span><br><span class="line">           <span class="comment">//执行命令，并将数据读取到reader中</span></span><br><span class="line">           <span class="keyword">int</span> affectRows = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">           print(<span class="string">"影响行数"</span> + affectRows);</span><br><span class="line">           print(<span class="string">"数据删除成功!"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">       &#123;</span><br><span class="line">           print(<span class="string">"数据删除失败!"</span> + ex.Message);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>执行结果:</p><p><img src="/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170118111212.jpg" alt=""></p><h2 id="代码下载"><a href="#代码下载" class="headerlink" title="代码下载"></a>代码下载</h2><p>点击<a href="mysql_op_demo.unitypackage"> <strong>此处</strong></a> 下载Unity工程文件</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于数据库的操作，基本上的思路是，连接数据库，打开，执行常用的SQL语句，只要能够掌握这些知识，足以应对基本的数据库访问操作。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;好久没有更新博客了，今天和大家一起分享一下数据库相关的知识。&lt;br&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;最近，学习了一下SQL的常用增删改查语句，但大多是直接在navicat上直接进行，没有把实际的操作转移到Unity中，那么今天就详细的给大家讲讲，怎么在Unity中操作数据库。&lt;/p&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;p&gt;如果想在Unity中连接MySQL数据库，需要大家提前做好准备&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mysql.data.dll 数据库连接类（点击&lt;a href=&quot;mysql.data.dll&quot;&gt; &lt;strong&gt;此处&lt;/strong&gt;&lt;/a&gt;下载)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;调整Unity工程的发布设置中Player Settings里的参数&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2017/01/17/database/00015_unity_mysql/unity_op_mysql/20170117133403.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;将API Compatibility Level调整为 .Net 2.0&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="数据库" scheme="http://www.felixwee.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="Unity" scheme="http://www.felixwee.com/tags/Unity/"/>
    
      <category term="MySQL" scheme="http://www.felixwee.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>NGUI中实现简单拖放</title>
    <link href="http://www.felixwee.com/2017/01/04/ngui/ngui_dragdrop/ngui_dragdop/"/>
    <id>http://www.felixwee.com/2017/01/04/ngui/ngui_dragdrop/ngui_dragdop/</id>
    <published>2017-01-04T12:37:51.000Z</published>
    <updated>2018-03-21T17:20:33.239Z</updated>
    
    <content type="html"><![CDATA[<h2 id="拖动的实现"><a href="#拖动的实现" class="headerlink" title="拖动的实现"></a>拖动的实现</h2><p>如果实现一个UI的可以拖动，只要在需要拖动的UI元素上添加上BoxCollider和UIDragAndDopItem便可以实现拖动。</p><h2 id="如果处理拖动和释放"><a href="#如果处理拖动和释放" class="headerlink" title="如果处理拖动和释放"></a>如果处理拖动和释放</h2><p>如果对拖动过程进行操作，那我们就需要新建类，并集成UIDragDropItem类，在新类中通过重写相应的方法来实现。</p><p>在我们拖动过程中到底发生了什么事情，有哪些方法被调用了呢？</p><p>下面是拖动过程中调用的方法，按实际顺序排列(标红项重要)</p><ul><li>OnPress(bool isPressed) 拖动对象是否被按下，按下为true,松开为false</li><li><font color="#ff0000">OnDragDropStart 拖动释放开始</font></li><li>StartDraging 拖动开始</li><li>OnDragStart()  开始拖动</li><li><font color="#ff0000">OnDragDropMove(Vector2 delta) 拖动释放操作移动</font></li><li>OnDrag(Vector2 delta)  拖动中</li><li>OnDragDropEnd() 拖动释放结束</li><li><font color="#ff0000">OnDragDropRelease(GameObject surface) 拖动物体被释放 </font></li><li>OnDragEnd()  拖动结束</li><li>OnPress(bool isPress)<a id="more"></a></li></ul><p>OnDragDropRelease(GameObject surface)<br>使用此方法可以对鼠标松开那一刻进行处理</p><h2 id="拖动案例一"><a href="#拖动案例一" class="headerlink" title="拖动案例一"></a>拖动案例一</h2><p>松开鼠标时，如果松开是，与影子重合，及设置花与影子在同一位置，此时shadow和flower都有BoxCollider,flower有MyDragItem（代码如下)</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyDragItem</span> : <span class="title">UIDragDropItem</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnDragDropRelease</span>(<span class="params">GameObject surface</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">base</span>.OnDragDropRelease(surface);</span><br><span class="line">        <span class="comment">//如果释放拖拽物体下面UI有碰撞体，并且名称为shadow,则将拖动的物体与shadow位置设为一样</span></span><br><span class="line">        <span class="keyword">if</span> (surface!=<span class="literal">null</span> &amp;&amp; surface.name==<span class="string">"shadow"</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.transform.localPosition = surface.transform.localPosition;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="拖动案例二"><a href="#拖动案例二" class="headerlink" title="拖动案例二"></a>拖动案例二</h2><p>在上一个案例的基础上，为shadow添加DragDropContainer组件，花添加DragDropItem组件，花会自动进入到Shadow游戏对象中去（可以不用编写任何代码）</p><p><img src="/2017/01/04/ngui/ngui_dragdrop/ngui_dragdop/2016092006345.bmp" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;拖动的实现&quot;&gt;&lt;a href=&quot;#拖动的实现&quot; class=&quot;headerlink&quot; title=&quot;拖动的实现&quot;&gt;&lt;/a&gt;拖动的实现&lt;/h2&gt;&lt;p&gt;如果实现一个UI的可以拖动，只要在需要拖动的UI元素上添加上BoxCollider和UIDragAndDopItem便可以实现拖动。&lt;/p&gt;
&lt;h2 id=&quot;如果处理拖动和释放&quot;&gt;&lt;a href=&quot;#如果处理拖动和释放&quot; class=&quot;headerlink&quot; title=&quot;如果处理拖动和释放&quot;&gt;&lt;/a&gt;如果处理拖动和释放&lt;/h2&gt;&lt;p&gt;如果对拖动过程进行操作，那我们就需要新建类，并集成UIDragDropItem类，在新类中通过重写相应的方法来实现。&lt;/p&gt;
&lt;p&gt;在我们拖动过程中到底发生了什么事情，有哪些方法被调用了呢？&lt;/p&gt;
&lt;p&gt;下面是拖动过程中调用的方法，按实际顺序排列(标红项重要)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OnPress(bool isPressed) 拖动对象是否被按下，按下为true,松开为false&lt;/li&gt;
&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;OnDragDropStart 拖动释放开始&lt;/font&gt;&lt;/li&gt;
&lt;li&gt;StartDraging 拖动开始&lt;/li&gt;
&lt;li&gt;OnDragStart()  开始拖动&lt;/li&gt;
&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;OnDragDropMove(Vector2 delta) 拖动释放操作移动&lt;/font&gt;&lt;/li&gt;
&lt;li&gt;OnDrag(Vector2 delta)  拖动中&lt;/li&gt;
&lt;li&gt;OnDragDropEnd() 拖动释放结束&lt;/li&gt;
&lt;li&gt;&lt;font color=&quot;#ff0000&quot;&gt;OnDragDropRelease(GameObject surface) 拖动物体被释放 &lt;/font&gt;&lt;/li&gt;
&lt;li&gt;OnDragEnd()  拖动结束&lt;/li&gt;
&lt;li&gt;OnPress(bool isPress)&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="NGUI" scheme="http://www.felixwee.com/categories/NGUI/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="拖拽" scheme="http://www.felixwee.com/tags/%E6%8B%96%E6%8B%BD/"/>
    
      <category term="拖动" scheme="http://www.felixwee.com/tags/%E6%8B%96%E5%8A%A8/"/>
    
      <category term="Drag" scheme="http://www.felixwee.com/tags/Drag/"/>
    
      <category term="Drop" scheme="http://www.felixwee.com/tags/Drop/"/>
    
  </entry>
  
  <entry>
    <title>NGUI图文聊天中的图文混排</title>
    <link href="http://www.felixwee.com/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/"/>
    <id>http://www.felixwee.com/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/</id>
    <published>2017-01-04T12:37:51.000Z</published>
    <updated>2018-02-05T18:48:59.530Z</updated>
    
    <content type="html"><![CDATA[<h2 id="图文混排介绍"><a href="#图文混排介绍" class="headerlink" title="图文混排介绍"></a>图文混排介绍</h2><p>图文混排通常用于聊天模块，在文字中夹杂表情图片。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921085229.jpg" alt=""></p><h2 id="位图字体制作"><a href="#位图字体制作" class="headerlink" title="位图字体制作"></a>位图字体制作</h2><p>1）图文混排的制作，首先要制作位图字体。<br>首先得下载一个位图制作工具Bitmap font generator,可以点击<a href="./assets/bmfont_1.13.exe">这里</a>下载<br>2) 将要作为位图的文字写入到一个文本文件中，以UTF-8编码格式保存或在BMFont中进行选择。</p><a id="more"></a><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921090001.jpg" alt=""></p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921090153.jpg" alt=""></p><p>亮色的字是制作位图的文字。</p><p>3）通过Edit菜单，选择Select Chars form File选中之前创建好的文本文件，软件会自动将文本中要制作位图字体的字符选中。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921090349.jpg" alt=""></p><p>4）通过Options菜单中的【Font Settings】选中要使用的字体文件,点击OK即可。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921090644.jpg" alt=""></p><p>5）导出设置</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921091036.jpg" alt=""></p><p>通过Texture 中的Width和Height用于设置最终生成图片的宽和高，如果设定的大小无法容纳所有字体，则会创建多个文件,可以通过快捷键[V]对最终生成的位图字体进行预览。</p><p>File Format 中的Texture和Comporession可以设置导出的位图使用什么格式和压缩算法。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921094916.jpg" alt=""></p><p>6) 通过Options菜单中的【Save Bitmap For Font as…】<br>在弹出的弹窗中填入文件名称MyFont,保存成功后会看到下面的文件.</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921095309.jpg" alt=""></p><p>7)将制作好的字体导入到Unity中，使用Font Maker制作位图字体。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921105526.jpg" alt=""></p><p><b>注意: Output 中的Atlas 保证为None</b></p><p>点击 Create the font 保存制作好的字体.</p><h2 id="制作表情"><a href="#制作表情" class="headerlink" title="制作表情"></a>制作表情</h2><p>1.将准备好的表情图只作为图集emoji，表情图点击<a href="./assets/emoji.zip">这里</a>下载.</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921110109.jpg" alt=""></p><p>2.重新打开Font Maker 在 Output下的图集中，选择制作好的表情图集emoji,再次点击Create the font 按钮，保存最终的字体为MyEmojiFont。</p><p>3.选中MyEmojiFont预制体，在UI Font下的【Symbols and Emotiicons】添加表情。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921110424.jpg" alt=""></p><p>左侧输入对应字符，中间选择对应的图片，填写完成后，点击Add进行表情添加。</p><h2 id="位图字体使用及图文混排"><a href="#位图字体使用及图文混排" class="headerlink" title="位图字体使用及图文混排"></a>位图字体使用及图文混排</h2><p>1)新建UILabel,并将字体选择为刚刚制作好的MyEmojiFont字体。</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921111353.jpg" alt=""></p><p>具体展现的效果如下</p><p><img src="/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921111427.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;图文混排介绍&quot;&gt;&lt;a href=&quot;#图文混排介绍&quot; class=&quot;headerlink&quot; title=&quot;图文混排介绍&quot;&gt;&lt;/a&gt;图文混排介绍&lt;/h2&gt;&lt;p&gt;图文混排通常用于聊天模块，在文字中夹杂表情图片。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2017/01/04/ngui/00014_ngui_twhp/TextEmotion/20160921085229.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;位图字体制作&quot;&gt;&lt;a href=&quot;#位图字体制作&quot; class=&quot;headerlink&quot; title=&quot;位图字体制作&quot;&gt;&lt;/a&gt;位图字体制作&lt;/h2&gt;&lt;p&gt;1）图文混排的制作，首先要制作位图字体。&lt;br&gt;首先得下载一个位图制作工具Bitmap font generator,可以点击&lt;a href=&quot;./assets/bmfont_1.13.exe&quot;&gt;这里&lt;/a&gt;下载&lt;br&gt;2) 将要作为位图的文字写入到一个文本文件中，以UTF-8编码格式保存或在BMFont中进行选择。&lt;/p&gt;
    
    </summary>
    
      <category term="NGUI" scheme="http://www.felixwee.com/categories/NGUI/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="图文混排" scheme="http://www.felixwee.com/tags/%E5%9B%BE%E6%96%87%E6%B7%B7%E6%8E%92/"/>
    
      <category term="聊天表情" scheme="http://www.felixwee.com/tags/%E8%81%8A%E5%A4%A9%E8%A1%A8%E6%83%85/"/>
    
      <category term="聊天" scheme="http://www.felixwee.com/tags/%E8%81%8A%E5%A4%A9/"/>
    
  </entry>
  
  <entry>
    <title>如何在HTC Vive中创建UI界面</title>
    <link href="http://www.felixwee.com/2016/11/03/vr/00011_vr_ui_ugui/htc_vive_ui/"/>
    <id>http://www.felixwee.com/2016/11/03/vr/00011_vr_ui_ugui/htc_vive_ui/</id>
    <published>2016-11-03T05:00:00.000Z</published>
    <updated>2018-02-05T18:50:51.398Z</updated>
    
    <content type="html"><![CDATA[<p>无论是游戏，还是虚拟现实等，都不可能缺少UI界面的制作，对于界面我们可以分为两种UI界面，一种是能够跟随VR头盔移动的UI,另一种为不跟随头盔移动的UI,也就是将UI看作三给空间中的游戏对象。下面将带领大家通过UGUI来制作界面.</p><p>UGUI的Canvas画布的RenderMode具有三种模式:</p><p><img src="/2016/11/03/vr/00011_vr_ui_ugui/htc_vive_ui/20161101215551.jpg" alt=""></p><a id="more"></a><ul><li><p>Screen Space – overlay<br>此模式不需要UI摄像机，UI将永远出现在所有摄像机的最前面,如果我想在UI前面显显示一个模型或游戏对象就不行了，VR的界面不能采用些种方式。</p></li><li><p>Screen Space- Camera<br>此模式是我决定采取的，它需要提供一个Camera用于渲染UI界面，这种方法和NGUI的原理有些像，这种形式我可以在UI界面与摄像机中间放置一些游戏对象，可以通过设定渲染摄像机，使UI跟随头盔进行移动。</p></li><li><p>World Space<br>这个就是完全3D的UI，整个Canvas画布被认定为是一个3D空间中的游戏对象，与创建的Cube或其它预设游戏对象一样,此模式用于创建不跟随头盔移动的UI界面。</p></li></ul><h2 id="UI界面的制作"><a href="#UI界面的制作" class="headerlink" title="UI界面的制作"></a>UI界面的制作</h2><h3 id="跟随头盔移动的UI界面"><a href="#跟随头盔移动的UI界面" class="headerlink" title="跟随头盔移动的UI界面"></a>跟随头盔移动的UI界面</h3><p>若要实现此模式，需要将Canvas的Render Mode选择为ScreenSpace-Camera。</p><p><img src="/2016/11/03/vr/00011_vr_ui_ugui/htc_vive_ui/20161101222310.jpg" alt=""></p><p>设置后，摄像机的效果如下图:</p><p><img src="/2016/11/03/vr/00011_vr_ui_ugui/htc_vive_ui/20161101222617.jpg" alt=""></p><p>当我们移动头盔时，由于UI是由头盔的摄像头渲染的，所以会跟随头盔移动。</p><h3 id="不跟随头盔移动的UI界面"><a href="#不跟随头盔移动的UI界面" class="headerlink" title="不跟随头盔移动的UI界面"></a>不跟随头盔移动的UI界面</h3><p>若要实现此模式，需要将Canvas的Render Mode选择为World Space。<br>我们只需要将Canvas中的调整为合适大小，和其它游戏对象一样，调整合适位置即可。</p><h2 id="UI的交互方式"><a href="#UI的交互方式" class="headerlink" title="UI的交互方式"></a>UI的交互方式</h2><p>UI的交互方式，需要通过射线与碰撞器的结合来实现，整个实现的思路类似于NGUI元素的碰撞检测。<br>通过手柄发出射线，当射线碰撞到UI元素后，添加上相同大小的碰撞器，再结合手柄的Trigger键来决定相应的操作。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">SteamVR_Controller.Device device;</span><br><span class="line">Linerender line;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  SteamVR_TrackedObject trackObj=<span class="keyword">this</span>.GetComponent&lt;SteamVR_TrackedObject&gt;();</span><br><span class="line">  device=SteamVR_Controller.Input((<span class="keyword">int</span>)trackObj.index);</span><br><span class="line">  line=<span class="keyword">this</span>.AddComponent&lt;Linerender&gt;();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//通过Linerender绘制射线</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//创建Ray</span></span><br><span class="line">   Ray ray=<span class="keyword">new</span> Ray(<span class="keyword">this</span>.transform.position,<span class="keyword">this</span>.transform.forward.normalized*<span class="number">1000</span>);</span><br><span class="line">   <span class="comment">//设定线顶点数</span></span><br><span class="line">   line.SetVertextCount(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//按下扳机键发出射线，在通过射线所碰撞的UI名称来区分按钮(每个按钮都需要添加Collider)</span></span><br><span class="line"><span class="keyword">if</span>(device.GetPressDown(SteamVR_Controller.ButtonMask.Trigger)&#123;</span><br><span class="line">RaycastHit hitInfo;</span><br><span class="line"><span class="keyword">if</span>(Physic.Raycast(ray,<span class="keyword">out</span> hitInfo))&#123;</span><br><span class="line">   <span class="comment">//在此处处理</span></span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;无论是游戏，还是虚拟现实等，都不可能缺少UI界面的制作，对于界面我们可以分为两种UI界面，一种是能够跟随VR头盔移动的UI,另一种为不跟随头盔移动的UI,也就是将UI看作三给空间中的游戏对象。下面将带领大家通过UGUI来制作界面.&lt;/p&gt;
&lt;p&gt;UGUI的Canvas画布的RenderMode具有三种模式:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/11/03/vr/00011_vr_ui_ugui/htc_vive_ui/20161101215551.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="VR" scheme="http://www.felixwee.com/categories/VR/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="UGUI" scheme="http://www.felixwee.com/tags/UGUI/"/>
    
      <category term="VR" scheme="http://www.felixwee.com/tags/VR/"/>
    
      <category term="VR UI" scheme="http://www.felixwee.com/tags/VR-UI/"/>
    
  </entry>
  
  <entry>
    <title>虚拟现实设备介绍</title>
    <link href="http://www.felixwee.com/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/"/>
    <id>http://www.felixwee.com/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/</id>
    <published>2016-11-02T16:00:00.000Z</published>
    <updated>2018-02-05T18:48:59.349Z</updated>
    
    <content type="html"><![CDATA[<p>随着虚拟现实在其他行业越来越深入的应用与推广，虚拟现实VR必将受到大众亲睐。那么，如果针对那些专业人士或者搞机党，现实里的三大VR巨头，到底谁的产品更值呢？</p><p>接下来我们主要来聊聊三大桌面虚拟现实平台的差异及竞争力，分别是Oculus Rift、HTC Vive以及索尼PlayStation VR。这三款产品不论是硬件性能、平台规模还是资源，都拥有极高的水准。当然，它们各自的使用条件、未来发展前景也不完全相同，如果你想在第一时间体验虚拟现实的魅力，不妨先了解一下哪一款才是最适合你的。</p><a id="more"></a><p>三款虚拟现实头戴也都集成了头部运动追踪、位置追踪系统，其中Oculus Rift和索尼PlayStation VR使用动作感应摄像头来识别用户运动，需要将摄像头放置在用户正前方；而HTC Vive则另辟蹊径，头戴上集成多达37个LED传感器，能够与安装在房间中的两个传感器构成一个动作捕捉空间，从理论上能够更精准地识别用户微小的动作。</p><p>由于三款虚拟现实头戴均是桌面级的产品，所以硬件设计上比较相似，只存在微小的差异。比如，Oculus Rift和HTC Vive均配备了单眼分辨率1080<em>1200像素的OLED显示屏、视角110度、刷新率90Hz，只不过Oculus Rift的屏幕比例为16:9、HTC Vive则为9:5。相对来说，索尼PlayStation VR的屏幕分辨率略低，为960</em>1080像素、视野率则是100度，但刷新率高达120Hz。</p><h2 id="1-Oculus-Rift"><a href="#1-Oculus-Rift" class="headerlink" title="1.Oculus Rift"></a>1.Oculus Rift</h2><p>虚拟现实领域最出名的品牌之一，Oculus拥有VR领域最令人印象深刻的技术团队，而且背后还有Facebook雄厚的财力支持。<br>而且Oculus头盔对PC主机的要求极高，现实中只有极少数土豪能满足这些配置。如果Rift真的相当“吃硬件”的话，那么对它持负面反应的人数有可能显著上升。另外一个老生常谈的问题就是，它的价格令很多人望而却步。</p><p>硬件设备:</p><ul><li>头戴显示器HMD</li><li>精英手柄</li><li>传感器</li><li>媒体遥控器</li><li>Oculus Touch(单独买)</li></ul><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/20161025225232.png" alt=""></p><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/00301490163_4f8ccee7.jpg" alt=""></p><h3 id="2-索尼-PS-VR"><a href="#2-索尼-PS-VR" class="headerlink" title="2.索尼 PS VR"></a>2.索尼 PS VR</h3><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/20161025172222.jpg" alt=""></p><p>配合索尼PlayStation 4游戏机使用的VR设备，虽然是三大桌面级VR眼镜中最便宜的一款，但也因此是科技含量最低的一款，利用不同颜色的灯光和摄像头配合定位，但有着硬件统一的优势，体验上并不会输给高性能PC驱动下的Vive和Rift。</p><p>硬件设备:</p><ul><li>头戴显示器HMD</li><li>PlayStation摄像头</li><li>PlayStation MoveX2</li></ul><h2 id="3-HTC-Vive"><a href="#3-HTC-Vive" class="headerlink" title="3.HTC Vive"></a>3.HTC Vive</h2><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_85d1e1ae59c15ddb9f9e0218618796a7.jpg" alt=""></p><p>HTC Vive 是智能手机制造商 HTC 和游戏巨头 Valve 合作开发的一款虚拟现实头戴显示器，它和 Oculus Rift 一样以 PC 计算机为基础平台。考虑到 Valve 在游戏领域的地位，因此 HTC Vive 在游戏资源方面会比 Oculus Rift 要丰富一些。<br>这款头戴设备内部配置有陀螺仪、加速度和激光定位等传感器，能够准确追踪用户在游戏地图中动作，并提供身临其境的游戏体验。除了游戏之外，HTC 还打算将 HTC Vive 用于非游戏领域，比如视频等。</p><p>硬件设备:</p><ul><li>头戴显示器HMD</li><li>HtC Vive控制器x2</li><li>定位基站x2</li></ul><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/53031.png" alt=""></p><h2 id="各种设备定位技术"><a href="#各种设备定位技术" class="headerlink" title="各种设备定位技术"></a>各种设备定位技术</h2><p>HTC vive所用的Lighthouse技术属于激光定位技术，Oculus Rift以及索尼PlayStation VR所用的定位技术都属于光学定位技术，其中Oculus Rift是红外主动式光学技术，索尼PlayStation VR则是可见光主动式光学技术</p><h3 id="HTC-Vive定位方式"><a href="#HTC-Vive定位方式" class="headerlink" title="HTC Vive定位方式"></a>HTC Vive定位方式</h3><p>HTC的Lighthouse室内定位技术属于激光扫描定位技术，靠激光和光敏传感器来确定运动物体的位置。两个激光发射器被安置在对角，形成大小可调的长方形区域。激光束由发射器里面的两排固定LED灯发出，每秒6次。每个激光发射器内有两个扫描模块，分别在水平和垂直方向轮流对定位空间发射激光扫描定位空间。<br>　　HTC Vive头显和手柄上有超过70个光敏传感器。通过计算接收激光的时间来计算传感器位置相对于激光发射器的准确位置，通过多个光敏传感器可以探测出头显的位置及方向。这里需要说明一下，HTC Vive采用的激光定位技术，定位过程中光敏传感器的ID会随着它接收到的数据同时传给计算单元的，也就是说计算单元是可以直接区分不同的光敏传感器，从而根据每个光敏传感器所固定在头显和手柄上的位置以及其他信息一起最终构建头显及手柄的三维模型。</p><h3 id="Oculus-Rift-定位方式"><a href="#Oculus-Rift-定位方式" class="headerlink" title="Oculus Rift 定位方式"></a>Oculus Rift 定位方式</h3><p>Oculus Rift设备上会隐藏着一些 红外灯（即为标记点），这些红外灯可以向外发射红外光，并用两台红外摄像机实时拍摄。所谓的红外摄像机就是在摄像机外加装红外光滤波片，这样摄像机只能拍摄到头显以及手柄（Oculus touch）上红外灯，从而过滤掉头显及手柄周围环境的可见光信号， 提高了获得图像的信噪比，增加了系统的鲁棒性。<br>获得红外图像后，将两台摄像机从不同角度采集到的图像传输到计算单元中，再通过视觉算法过滤掉无用的信息，从而获得红外灯的位置。<br>再利用PnP算法，即利用四个不共面的红外灯在设备上的位置信息、四个点获得的图像信息即可最终将设备纳入摄像头坐标系，拟合出设备的三维模型，并以此来实时监控玩家的头部、手部运动。</p><h3 id="PSVR定位方式"><a href="#PSVR定位方式" class="headerlink" title="PSVR定位方式"></a>PSVR定位方式</h3><p>采用的是可见光主动式光学定位技术。<br>PlayStation VR设备采用体感摄像头和类似之前PS Move的彩色发光物体追踪，去定位人头部和控制器的位置。头显和手柄上会放LED灯球，每个手柄、头显上各装配一个。这些LED光球可以自行发光，且不同光球所发的光颜色不同，这样在摄像头拍摄时，光球与背景环境、各个光球之间都可以很好的区分。PS3原本采用单个摄像头，通过计算光球在图片中的半径来推算光球相对于摄像头的位置，并最终确定手柄和头显的位置。但是，单个摄像头定位的精度不高，鲁棒性不强，有时会把环境中的彩色物体识别成手柄，有时阳光比较强烈的时候还会不起作用。因此PS4采用了体感摄像头，即双目摄像头，利用两个摄像头拍摄到的图片计算光球的空间三维坐标。</p><h2 id="移动端VR设备"><a href="#移动端VR设备" class="headerlink" title="移动端VR设备"></a>移动端VR设备</h2><h3 id="1-三星Gear-VR"><a href="#1-三星Gear-VR" class="headerlink" title="1.三星Gear VR"></a>1.三星Gear VR</h3><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/14561408_182906678785071_8491669128996716544_n.jpg" alt=""></p><p>三星和虚拟现实厂商 Oculus 联合推出的基于智能手机的虚拟现实头戴设备 Gear VR 进一步降低了虚拟现实技术的门槛，但同时其也带来了一系列新的挑战，因为它只能支持三星的智能手机。不过，这款设备在游戏、影音等方面的资源还是非常丰富的，其市场售价也不贵，大概在 200 美元左右。</p><h3 id="2-大朋——大朋VR一体机（移动级）、头盔（桌面级）"><a href="#2-大朋——大朋VR一体机（移动级）、头盔（桌面级）" class="headerlink" title="2.大朋——大朋VR一体机（移动级）、头盔（桌面级）"></a>2.大朋——大朋VR一体机（移动级）、头盔（桌面级）</h3><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_9859ca1e5cd4ef03493cd075e872adb5.jpg" alt=""></p><p>大朋作为国内较早进入VR领域的厂商之一，一直以来都有着不错的知名度，不过一体机由于无法轻易升级，并且价格昂贵，很难成为市场的主流，因此也并没有取得很好的成绩。相比之下，桌面级的大朋VR头盔价格较低，并且兼容Oculus之类的桌面VR设备，更有实用价值</p><h2 id="3-谷歌纸板眼镜"><a href="#3-谷歌纸板眼镜" class="headerlink" title="3.谷歌纸板眼镜"></a>3.谷歌纸板眼镜</h2><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/Img419153221.png" alt=""></p><p>就在各个虚拟现实眼镜生产商各种比拼性能的时候，谷歌却推出了一个廉价到极点的纸板眼镜，即使更新到了第二代，它仍旧是一个用硬纸板做成的虚拟现实眼镜。<br>从纯技术的角度上讲，这款纸板眼镜没有精致的摄像头，没有位置追踪器，甚至连头带都没有。我们有的只是一个更大、更厚的纸板来承担一部六英寸的大尺寸智能手机。</p><h3 id="4-暴风科技——暴风魔镜（移动级）"><a href="#4-暴风科技——暴风魔镜（移动级）" class="headerlink" title="4.暴风科技——暴风魔镜（移动级）"></a>4.暴风科技——暴风魔镜（移动级）</h3><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_0952d82706d3fb306ee10b96e9a03625.jpg" alt=""></p><p>短短数月，暴风魔镜更新了5代产品，但始终还是配合手机使用的移动级VR设备，而无论硬件上如何改进，内容上还是没有运用上自己在影视方面的优势，实用价值一般。</p><h2 id="乐视——超级头盔（移动级）、LeVR-Pro-1（移动级）"><a href="#乐视——超级头盔（移动级）、LeVR-Pro-1（移动级）" class="headerlink" title="乐视——超级头盔（移动级）、LeVR Pro 1（移动级）"></a>乐视——超级头盔（移动级）、LeVR Pro 1（移动级）</h2><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_b553aeb35f0fc3be211d9044833eb743.jpg" alt=""><br><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_a0748d7dd6f7952736289d2cc6b6a04b.jpg" alt=""></p><p>乐视的两款设备都是配合手机使用的盒子，在造型上，乐视做出了市面上大多数厂商都没有做到的精致感，但目前内容上还十分缺乏，这也是国产VR眼镜的通病。</p><h2 id="华为——华为VR（移动级）"><a href="#华为——华为VR（移动级）" class="headerlink" title="华为——华为VR（移动级）"></a>华为——华为VR（移动级）</h2><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_6a84a8f3d5739de2fd66d977dcbaab58.jpg" alt=""></p><p>自从DayDream提出之后，各大手机厂商纷纷愿意做出自家手机独占的VR设备，华为VR也不例外。目前这款华为VR还未上市，但从华为在硬件方面的积累上看，至少硬件上是不会让人失望的，而软件能够做到什么地步，才是真正考验这些手机大厂是时候。</p><h2 id="小米——小米VR玩具版（移动级）"><a href="#小米——小米VR玩具版（移动级）" class="headerlink" title="小米——小米VR玩具版（移动级）"></a>小米——小米VR玩具版（移动级）</h2><p><img src="/2016/11/03/vr/00011_vr_device_intro/vrdevice_intro/ertong_772454669b8a82104b4a55a898adcc22.jpg" alt=""></p><p>小米VR吊起了大家的胃口很长时间，但随后发布了一款实用锦纶和拉链制作的高端“盒子”让人大跌眼镜，当然我们更愿意相信这是一个开始，所以才有自嘲的“玩具版”字样。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;随着虚拟现实在其他行业越来越深入的应用与推广，虚拟现实VR必将受到大众亲睐。那么，如果针对那些专业人士或者搞机党，现实里的三大VR巨头，到底谁的产品更值呢？&lt;/p&gt;
&lt;p&gt;接下来我们主要来聊聊三大桌面虚拟现实平台的差异及竞争力，分别是Oculus Rift、HTC Vive以及索尼PlayStation VR。这三款产品不论是硬件性能、平台规模还是资源，都拥有极高的水准。当然，它们各自的使用条件、未来发展前景也不完全相同，如果你想在第一时间体验虚拟现实的魅力，不妨先了解一下哪一款才是最适合你的。&lt;/p&gt;
    
    </summary>
    
      <category term="VR" scheme="http://www.felixwee.com/categories/VR/"/>
    
    
      <category term="HTC Vive" scheme="http://www.felixwee.com/tags/HTC-Vive/"/>
    
      <category term="Oculus" scheme="http://www.felixwee.com/tags/Oculus/"/>
    
      <category term="PlayStation VR" scheme="http://www.felixwee.com/tags/PlayStation-VR/"/>
    
  </entry>
  
  <entry>
    <title>HTC Vive虚拟现实设备手柄交互教程</title>
    <link href="http://www.felixwee.com/2016/11/01/vr/00013_htcvive_controller_dev/htcvive_controller_dev/"/>
    <id>http://www.felixwee.com/2016/11/01/vr/00013_htcvive_controller_dev/htcvive_controller_dev/</id>
    <published>2016-11-01T10:20:00.000Z</published>
    <updated>2018-02-05T18:50:54.477Z</updated>
    
    <content type="html"><![CDATA[<h2 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h2><p>在使用Unity中针对HTC Vive设备进行开发，需要使用到Steam平台为我们提供的插件包 <a href="https://www.assetstore.unity3d.com/cn/#!/content/32647" target="_blank" rel="noopener">SteamVR Plugin.unitypackage</a>.</p><p>这个插件中已经封装了与HTC Vive硬件进行通信的相关类，也是我们在做HTC Vive开发过程中经常使用的类，下面讲带领大家一起来了解一下。</p><ul><li><p>SteamVR_TrackedObject<br>此类用于根据硬件设备，并为硬件设备分配相应的索引</p></li><li><p>SteamVR_Controller.Device<br>最重要的类，封装了跟踪设备的全部信息,例如手柄的各种交互相应勾动扳机等。</p></li><li><p>SteamVR_Controller.ButtonMask<br>手柄各按键的名称</p></li><li><p>SteamVR_Controller<br>此类通常使用静态方法Input根据设备索引值获取对应的设备(Device)对象</p></li></ul><a id="more"></a><h2 id="HTC-手柄按键介绍"><a href="#HTC-手柄按键介绍" class="headerlink" title="HTC 手柄按键介绍"></a>HTC 手柄按键介绍</h2><p>在学习手柄操作之前，我们先来了解一下手柄上的按钮到底有那些？</p><p><img src="/2016/11/01/vr/00013_htcvive_controller_dev/htcvive_controller_dev/htc_shoubing.png" alt=""></p><p>每个按钮的名称都已经在ButtonMask中定义好。</p><p><img src="/2016/11/01/vr/00013_htcvive_controller_dev/htcvive_controller_dev/20161020180033.png" alt=""></p><h2 id="手柄的交互编程"><a href="#手柄的交互编程" class="headerlink" title="手柄的交互编程"></a>手柄的交互编程</h2><p>想要操作手柄的前提是先要获取到设备唯一标识也就是设备的索引,然后通过这个索引来获取的设备,也就是Device对象,然后利用Device对象的相应函数进行交互。</p><h4 id="1-通过手柄游戏对象上的SteamVR-TrackedObject组件进行获取。"><a href="#1-通过手柄游戏对象上的SteamVR-TrackedObject组件进行获取。" class="headerlink" title="1.通过手柄游戏对象上的SteamVR_TrackedObject组件进行获取。"></a>1.通过手柄游戏对象上的SteamVR_TrackedObject组件进行获取。</h4><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取跟踪对象</span></span><br><span class="line">SteamVR_TrackedObject trackObj = <span class="keyword">this</span>.GetComponent&lt;SteamVR_TrackedObject&gt;();</span><br><span class="line"><span class="comment">//输出设备Index</span></span><br><span class="line">print(trackObj.index);</span><br><span class="line"></span><br><span class="line">-----输出结果----</span><br><span class="line">Device1</span><br></pre></td></tr></table></figure><p>实际上在SteamVR_TrackedObject类枚举类型EIndex中，已经预先定义了16个设备索引。<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EIndex</span><br><span class="line">&#123;</span><br><span class="line">None = <span class="number">-1</span>,</span><br><span class="line">Hmd = (<span class="keyword">int</span>)OpenVR.k_unTrackedDeviceIndex_Hmd,</span><br><span class="line">Device1,</span><br><span class="line">Device2,</span><br><span class="line">Device3,</span><br><span class="line">Device4,</span><br><span class="line">Device5,</span><br><span class="line">Device6,</span><br><span class="line">Device7,</span><br><span class="line">Device8,</span><br><span class="line">Device9,</span><br><span class="line">Device10,</span><br><span class="line">Device11,</span><br><span class="line">Device12,</span><br><span class="line">Device13,</span><br><span class="line">Device14,</span><br><span class="line">Device15</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="2-通过找到的索引获取到Device对象。"><a href="#2-通过找到的索引获取到Device对象。" class="headerlink" title="2.通过找到的索引获取到Device对象。"></a>2.通过找到的索引获取到Device对象。</h4><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过设备索引获取到相应设备对象Device</span></span><br><span class="line">SteamVR_Controller.Device device= SteamVR_Controller.Input((<span class="keyword">int</span>)trackObj.index);</span><br></pre></td></tr></table></figure><h4 id="3-调用Device中相应函数，来捕获手柄的操作。"><a href="#3-调用Device中相应函数，来捕获手柄的操作。" class="headerlink" title="3.调用Device中相应函数，来捕获手柄的操作。"></a>3.调用Device中相应函数，来捕获手柄的操作。</h4><p>通过Device.GetPressDown / GetPressUp / GetPress/Device.GetTouchDown / GetTouchUp / GetTouch进行操作</p><p>（1）手柄按键(以Trigger键为参考，其它键不再罗列)</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//按键被按下</span></span><br><span class="line"><span class="keyword">bool</span> triggerPressDown=device.GetPressDown(SteamVR_Controller.ButtonMask.Trigger);</span><br><span class="line"><span class="keyword">if</span>(triggerPressDown)&#123;</span><br><span class="line">  print(<span class="string">"扳机键Trigger被按下"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//按键被松开</span></span><br><span class="line"><span class="keyword">if</span>(device.GetPressUp(SteamVR_Controller.ButtonMask.Trigger))&#123;</span><br><span class="line">  print(<span class="string">"扳机键Trigger被松开"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//按键被按下并保持不松开</span></span><br><span class="line"><span class="keyword">if</span>(device.GetPress(SteamVR_Controller.ButtonMask.Trigger))&#123;</span><br><span class="line">  print(<span class="string">"扳机键Trigger被按下并保持"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>( 2 ) 触摸板<br>触摸板具有两种方式</p><ul><li>触摸圆盘时，通过当前的状态获取触摸量</li><li>直接通过GetAxis获取触摸值</li></ul><p>通过获取用户触摸操作<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取设备</span></span><br><span class="line"> SteamVR_Controller.Device device=SteamVR_Controller.Input((<span class="keyword">int</span>)GetComponent&lt;SteamVR_TrackedObject&gt;().index);</span><br><span class="line"><span class="comment">//第一种方法</span></span><br><span class="line"><span class="keyword">if</span>(device.GetTouchDown(SteamVR_Controller.ButtonMask.touchpad))&#123;</span><br><span class="line">   <span class="comment">//获取当前状态信息</span></span><br><span class="line">  VRControllerState_t curState=device.GetState();</span><br><span class="line">  <span class="comment">//当前状态信息中的轴输入值</span></span><br><span class="line">   print(curState.rAxis0.x+<span class="string">","</span>+curState.rAxis0.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种方法(比较偏底层)</span></span><br><span class="line">Vector2 v2=device.GetAxis(Valve.VR.EVRButtonId.k_EButton_Axis0);</span><br><span class="line"><span class="comment">//输出轴输入值，分为x轴和y轴</span></span><br><span class="line">print(v2);</span><br></pre></td></tr></table></figure></p><p>( 3 ) 手柄的震动<br>手柄的震动通过TriggerHapicPulse方法,参数可以理解为震动的强度，最大值为3000,超出3000将不会震动<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SteamVR_Controller.Device device=SteamVR_Controller.Input((<span class="keyword">int</span>)GetComponent&lt;SteamVR_TrackedObject&gt;().index);</span><br><span class="line">TriggerHapticPulse(<span class="number">2000</span>);</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;预备知识&quot;&gt;&lt;a href=&quot;#预备知识&quot; class=&quot;headerlink&quot; title=&quot;预备知识&quot;&gt;&lt;/a&gt;预备知识&lt;/h2&gt;&lt;p&gt;在使用Unity中针对HTC Vive设备进行开发，需要使用到Steam平台为我们提供的插件包 &lt;a href=&quot;https://www.assetstore.unity3d.com/cn/#!/content/32647&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SteamVR Plugin.unitypackage&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;这个插件中已经封装了与HTC Vive硬件进行通信的相关类，也是我们在做HTC Vive开发过程中经常使用的类，下面讲带领大家一起来了解一下。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;SteamVR_TrackedObject&lt;br&gt;此类用于根据硬件设备，并为硬件设备分配相应的索引&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SteamVR_Controller.Device&lt;br&gt;最重要的类，封装了跟踪设备的全部信息,例如手柄的各种交互相应勾动扳机等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SteamVR_Controller.ButtonMask&lt;br&gt;手柄各按键的名称&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SteamVR_Controller&lt;br&gt;此类通常使用静态方法Input根据设备索引值获取对应的设备(Device)对象&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="VR" scheme="http://www.felixwee.com/categories/VR/"/>
    
    
      <category term="VR" scheme="http://www.felixwee.com/tags/VR/"/>
    
      <category term="HTC Vive" scheme="http://www.felixwee.com/tags/HTC-Vive/"/>
    
      <category term="虚拟现实" scheme="http://www.felixwee.com/tags/%E8%99%9A%E6%8B%9F%E7%8E%B0%E5%AE%9E/"/>
    
      <category term="HTC Vive 手柄" scheme="http://www.felixwee.com/tags/HTC-Vive-%E6%89%8B%E6%9F%84/"/>
    
      <category term="控制器" scheme="http://www.felixwee.com/tags/%E6%8E%A7%E5%88%B6%E5%99%A8/"/>
    
      <category term="触摸盘" scheme="http://www.felixwee.com/tags/%E8%A7%A6%E6%91%B8%E7%9B%98/"/>
    
      <category term="交互" scheme="http://www.felixwee.com/tags/%E4%BA%A4%E4%BA%92/"/>
    
  </entry>
  
  <entry>
    <title>Unity3D中Layers和LayerMask解析</title>
    <link href="http://www.felixwee.com/2016/10/26/unity/00012_unity_layermask/unity_layermask/"/>
    <id>http://www.felixwee.com/2016/10/26/unity/00012_unity_layermask/unity_layermask/</id>
    <published>2016-10-26T14:01:00.000Z</published>
    <updated>2018-02-05T18:48:59.394Z</updated>
    
    <content type="html"><![CDATA[<p>在Unity中每个GameObject都有Layer属性，默认的Layer都是Default。在Unity中可编辑的Layer共有24个（8—31层），官方已使用的是0—7层，默认不可编辑！</p><p>LayerMask实际上是一个位码操作，在Unity3D中一共有32个Layer层，并且不可增加。</p><a id="more"></a><p>Unity中是用int32来表示32个Layer层。int32表示二进制一共有32位（0—31）。<br>在Unity中可编辑的Layer如下图所示：</p><p><img src="/2016/10/26/unity/00012_unity_layermask/unity_layermask/a9b41e14jw1esshija7ddj20830k8jsl.jpg" alt=""></p><h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><p>按位运算符：~、|、&amp;、^。位运算符主要用来对二进制位进行操作。</p><p>逻辑运算符：&amp;&amp;、||、！。逻辑运算符把语句连接成更复杂的复杂语句。</p><p>按位运算符：左移运算符&lt;&lt;，左移表示乘以2，左移多少位表示乘以2的几次幂。</p><p>举个栗子：</p><p>var temp = 14 &lt;&lt; 2; 表示十进制数14转化为二进制后向左移动2位。</p><p>temp最后计算的值为 14乘以2的平方，temp = 56；<br>同理，右移运算符&gt;&gt;，移动多少位表示除以2的几次幂。<br>具体可以转到博客：按位运算符.<br>上面是个基础知识的补充。</p><h2 id="在Unity中是用LayerMask"><a href="#在Unity中是用LayerMask" class="headerlink" title="在Unity中是用LayerMask"></a>在Unity中是用LayerMask</h2><p>Layers</p><p>官方给出的描述是：Layers通常被摄像机用来渲染部分场景，和灯光照射部分场景使用。但是它们也可以用来做射线检测时忽略一些collder或Collision使用。</p><p>如何编辑Layers.</p><p>在代码中使用时如何开启某个Layers？</p><p>LayerMask mask = 1 &lt;&lt; 你需要开启的Layers层。<br>LayerMask mask = 0 &lt;&lt; 你需要关闭的Layers层。</p><p>举几个个栗子：</p><p>LayerMask mask = 1 &lt;&lt; 2; 表示开启Layer2。<br>LayerMask mask = 0 &lt;&lt; 5;表示关闭Layer5。<br>LayerMask mask = 1&lt;&lt;2|1&lt;&lt;8;表示开启Layer2和Layer8。<br>LayerMask mask = 0&lt;&lt;3|0&lt;&lt;7;表示关闭Layer3和Layer7。<br>上面也可以写成：</p><p>LayerMask mask = ~（1&lt;&lt;3|1&lt;&lt;7）;表示关闭Layer3和Layer7。<br>LayerMask mask = 1&lt;&lt;2|0&lt;&lt;4;表示开启Layer2并且同时关闭Layer4.</p><p>代码：<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">example</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line">    LayerMask mask =  ~（<span class="number">1</span>&lt;&lt;<span class="number">3</span>|<span class="number">1</span>&lt;&lt;<span class="number">7</span>）;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Physics.Raycast(transform.position, transform.forward, <span class="number">100</span>, mask.<span class="keyword">value</span>))</span><br><span class="line">            Debug.Log(<span class="string">"Hit something"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在Unity中每个GameObject都有Layer属性，默认的Layer都是Default。在Unity中可编辑的Layer共有24个（8—31层），官方已使用的是0—7层，默认不可编辑！&lt;/p&gt;
&lt;p&gt;LayerMask实际上是一个位码操作，在Unity3D中一共有32个Layer层，并且不可增加。&lt;/p&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="http://www.felixwee.com/categories/Unity3D/"/>
    
    
      <category term="Unity" scheme="http://www.felixwee.com/tags/Unity/"/>
    
      <category term="LayerMask" scheme="http://www.felixwee.com/tags/LayerMask/"/>
    
      <category term="Unity层" scheme="http://www.felixwee.com/tags/Unity%E5%B1%82/"/>
    
  </entry>
  
  <entry>
    <title>利用Bat命令将文件夹映射为系统磁盘</title>
    <link href="http://www.felixwee.com/2016/10/25/other/00010_bat_mapdrive/map_system_drive/"/>
    <id>http://www.felixwee.com/2016/10/25/other/00010_bat_mapdrive/map_system_drive/</id>
    <published>2016-10-25T06:54:00.000Z</published>
    <updated>2018-02-05T18:48:59.092Z</updated>
    
    <content type="html"><![CDATA[<p>在之前的工作中，记得有一个比较小的工具，能够将本地的文件夹映射为本地的一个系统盘，但早已不记得叫什么名字了，索性自己写一个这样的工具，通过网络搜索，找到一个BAT批处理指令 subst 能够做这样的事情，自己就倒腾了一下，结果还是挺让人满意的。这个指令能够映射盘符，也可以取消映射。</p><a id="more"></a><h2 id="映射盘符"><a href="#映射盘符" class="headerlink" title="映射盘符"></a>映射盘符</h2><p>subst使用格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subst X:  D:\</span><br></pre></td></tr></table></figure></p><p>解释:</p><ul><li>X: 为需要映射的盘符</li><li>D:\ 需要进行磁盘映射的文件夹</li></ul><p>为了让程序比较智能一些，我在这里通过键盘输入盘符名称，输入的盘符只需要输入A-Z的字母就可以，使用时，直接在需要映射磁盘的文件家中新建文本文件，直接将下面的代码复制到文本文件中，修改扩展名为bat，双击打开就OK.</p><p>进行映射的代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cls</span><br><span class="line">@echo off</span><br><span class="line">mode con cols=100 lines=30&amp;color 0a</span><br><span class="line">echo =================================</span><br><span class="line">echo =                               =</span><br><span class="line">echo =   文件夹映射系统磁盘工具      =</span><br><span class="line">echo =                               =</span><br><span class="line">echo =     Code by ZRFrank           =</span><br><span class="line">echo =    weifengan@163.com          =</span><br><span class="line">echo =    www.weifengan.com          =</span><br><span class="line">echo =                               =</span><br><span class="line">echo =================================</span><br><span class="line">set /p drive=&quot;请输入要映射的盘符名称（A-Z):&quot;</span><br><span class="line">subst %drive%: %cd%</span><br><span class="line">echo .</span><br><span class="line">echo --------提示信息-------------</span><br><span class="line">echo 目    录: %cd%</span><br><span class="line">echo 映射盘符: %drive%</span><br><span class="line">echo 执行结果: 映射成功</span><br><span class="line">echo -------------------------------</span><br><span class="line">pause</span><br></pre></td></tr></table></figure></p><p>运行效果：</p><p><img src="/2016/10/25/other/00010_bat_mapdrive/map_system_drive/20161025151620.jpg" alt=""></p><p>我的电脑中的变化:</p><p><img src="/2016/10/25/other/00010_bat_mapdrive/map_system_drive/20161025151707.jpg" alt=""></p><h2 id="取消映射盘符"><a href="#取消映射盘符" class="headerlink" title="取消映射盘符"></a>取消映射盘符</h2><p>取消映射参数相对比较简单，只需要指定要取消的盘符名称<br>使用格式:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">subst X: /d</span><br></pre></td></tr></table></figure></p><p>解释:</p><ul><li>X: 需要取消映射的盘符</li><li>/d 命令参数，用于取消映射关系</li></ul><p>具体代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cls</span><br><span class="line">@echo off</span><br><span class="line">mode con cols=100 lines=30&amp;color 0a</span><br><span class="line">echo =================================</span><br><span class="line">echo =                               =</span><br><span class="line">echo =   文件夹映射系统磁盘删除工具    =</span><br><span class="line">echo =                               =</span><br><span class="line">echo =     Code by ZRFrank           =</span><br><span class="line">echo =    weifengan@163.com          =</span><br><span class="line">echo =    www.weifengan.com          =</span><br><span class="line">echo =                               =</span><br><span class="line">echo =================================</span><br><span class="line">set /p drive=&quot;请输入要删除的盘符名称（A-Z):&quot;</span><br><span class="line">subst %drive%: /d</span><br><span class="line">echo .</span><br><span class="line">echo --------提示信息-------------</span><br><span class="line">echo 执行结果: 删除%drive%映射成功</span><br><span class="line">echo -------------------------------</span><br><span class="line">pause</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在之前的工作中，记得有一个比较小的工具，能够将本地的文件夹映射为本地的一个系统盘，但早已不记得叫什么名字了，索性自己写一个这样的工具，通过网络搜索，找到一个BAT批处理指令 subst 能够做这样的事情，自己就倒腾了一下，结果还是挺让人满意的。这个指令能够映射盘符，也可以取消映射。&lt;/p&gt;
    
    </summary>
    
      <category term="BAT" scheme="http://www.felixwee.com/categories/BAT/"/>
    
    
      <category term="BAT" scheme="http://www.felixwee.com/tags/BAT/"/>
    
      <category term="批处理" scheme="http://www.felixwee.com/tags/%E6%89%B9%E5%A4%84%E7%90%86/"/>
    
      <category term="cmd" scheme="http://www.felixwee.com/tags/cmd/"/>
    
      <category term="subst" scheme="http://www.felixwee.com/tags/subst/"/>
    
      <category term="映射磁盘" scheme="http://www.felixwee.com/tags/%E6%98%A0%E5%B0%84%E7%A3%81%E7%9B%98/"/>
    
  </entry>
  
  <entry>
    <title>NGUI实战技术之位图字体及图文混排</title>
    <link href="http://www.felixwee.com/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/"/>
    <id>http://www.felixwee.com/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/</id>
    <published>2016-10-24T12:37:51.000Z</published>
    <updated>2018-02-05T18:48:59.075Z</updated>
    
    <content type="html"><![CDATA[<p>%</p><p>图文混排通常用于聊天模块，在文字中夹杂表情图片。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921085229.jpg" alt=""></p><a id="more"></a><h2 id="位图字体制作"><a href="#位图字体制作" class="headerlink" title="位图字体制作"></a>位图字体制作</h2><p>1）图文混排的制作，首先要制作位图字体。<br>首先得下载一个位图制作工具Bitmap font generator,可以点击<a href="/images/bmfont_1.13.exe">这里</a>下载<br>2) 将要作为位图的文字写入到一个文本文件中，以UTF-8编码格式保存或在BMFont中进行选择。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921090001.jpg" alt=""></p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921090153.jpg" alt=""></p><p>亮色的字是制作位图的文字。</p><p>3）通过Edit菜单，选择Select Chars form File选中之前创建好的文本文件，软件会自动将文本中要制作位图字体的字符选中。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921090349.jpg" alt=""></p><p>4）通过Options菜单中的【Font Settings】选中要使用的字体文件,点击OK即可。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921090644.jpg" alt=""></p><p>5）导出设置</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921091036.jpg" alt=""></p><p>通过Texture 中的Width和Height用于设置最终生成图片的宽和高，如果设定的大小无法容纳所有字体，则会创建多个文件,可以通过快捷键[V]对最终生成的位图字体进行预览。</p><p>File Format 中的Texture和Comporession可以设置导出的位图使用什么格式和压缩算法。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921094916.jpg" alt=""></p><p>6) 通过Options菜单中的【Save Bitmap For Font as…】<br>在弹出的弹窗中填入文件名称MyFont,保存成功后会看到下面的文件.</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921095309.jpg" alt=""></p><p>7)将制作好的字体导入到Unity中，使用Font Maker制作位图字体。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921105526.jpg" alt=""></p><p><b>注意: Output 中的Atlas 保证为None</b></p><p>点击 Create the font 保存制作好的字体.</p><h2 id="制作表情"><a href="#制作表情" class="headerlink" title="制作表情"></a>制作表情</h2><p>1.将准备好的表情图只作为图集emoji，表情图点击<a href="/images/emoji.zip">这里</a>下载.</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921110109.jpg" alt=""></p><p>2.重新打开Font Maker 在 Output下的图集中，选择制作好的表情图集emoji,再次点击Create the font 按钮，保存最终的字体为MyEmojiFont。</p><p>3.选中MyEmojiFont预制体，在UI Font下的【Symbols and Emotiicons】添加表情。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921110424.jpg" alt=""></p><p>左侧输入对应字符，中间选择对应的图片，填写完成后，点击Add进行表情添加。</p><h2 id="位图字体使用及图文混排"><a href="#位图字体使用及图文混排" class="headerlink" title="位图字体使用及图文混排"></a>位图字体使用及图文混排</h2><p>1)新建UILabel,并将字体选择为刚刚制作好的MyEmojiFont字体。</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921111353.jpg" alt=""></p><p>具体展现的效果如下</p><p><img src="/2016/10/24/ngui/00009_ngui_tuwenhunpai/TextEmotion/20160921111427.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      NGUI页签的制作
    
    </summary>
    
      <category term="NGUI" scheme="http://www.felixwee.com/categories/NGUI/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="位图字体" scheme="http://www.felixwee.com/tags/%E4%BD%8D%E5%9B%BE%E5%AD%97%E4%BD%93/"/>
    
      <category term="图文混排" scheme="http://www.felixwee.com/tags/%E5%9B%BE%E6%96%87%E6%B7%B7%E6%8E%92/"/>
    
  </entry>
  
  <entry>
    <title>NGUI组件之页签(TabView)</title>
    <link href="http://www.felixwee.com/2016/10/20/ngui/00008_ngui_tabview/TabView/"/>
    <id>http://www.felixwee.com/2016/10/20/ngui/00008_ngui_tabview/TabView/</id>
    <published>2016-10-20T12:37:51.000Z</published>
    <updated>2018-03-09T12:57:10.462Z</updated>
    
    <content type="html"><![CDATA[<p>页签实际上是再Toggle的基础上延伸出来的一种组合型组件，无论是在游戏中还是应用软件中，都有他的身影。下面的图及时他们的体现。<br><a id="more"></a><br><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160919171010.jpg" alt="游戏中装备，经脉，称号"><br><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160919171130.jpg" alt="游戏中属性，技能，图鉴"><br><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160920104519.jpg" alt="Google Chrome浏览器页签"></p><p>页签的头，使用的是UIToggle组件来完成，每一个Toggle对应相应的内容使用相应的Panel或UI容器来完成。</p><h2 id="页签的制作"><a href="#页签的制作" class="headerlink" title="页签的制作"></a>页签的制作</h2><p>本节课将带领大家完成的效果如下。</p><p><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160920120404.jpg" alt=""><br><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160920120522.jpg" alt="">;</p><p>1）创建3个空游戏对象，命名为TabView，Tabs,Views.Tabs用于放置Toggle组件,Views用于放置每个Toggle对应的内容。</p><p><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160920130325.jpg" alt=""></p><p>2)在Tabs中新建2个Toggle组件，使用Label显示Tab名称。</p><p>3）在views游戏对象中，为每个Tab创建对应的内容，此处暂时使用Label显示一些文本,分别命名为view1,view2.<br>4）在每个Toggle组件上添加Toggle Objects或 Toggle Components组件，用来设置每个Toggle对应显示的内容。</p><p><img src="/2016/10/20/ngui/00008_ngui_tabview/TabView/20160920132156.jpg" alt=""></p><p>Avtive 列表用于放置当前Toggle被选中时，需要显示的游戏对象，或者说选中是，激活的游戏对象。<br>Deactive 列表用于存放当前Toggle被选中是，不需要显示的游戏对象。</p><p>通常境况下，只设置Active列表要显示的游戏对象就OK了.</p>]]></content>
    
    <summary type="html">
    
      NGUI页签的制作
    
    </summary>
    
      <category term="NGUI" scheme="http://www.felixwee.com/categories/NGUI/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="TabView" scheme="http://www.felixwee.com/tags/TabView/"/>
    
      <category term="页签" scheme="http://www.felixwee.com/tags/%E9%A1%B5%E7%AD%BE/"/>
    
  </entry>
  
  <entry>
    <title>利用Vive Telport 插件实现HTC Vive瞬移系统</title>
    <link href="http://www.felixwee.com/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/"/>
    <id>http://www.felixwee.com/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/</id>
    <published>2016-10-18T12:37:51.000Z</published>
    <updated>2018-02-05T18:48:58.921Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Vive-Teleporter-简介"><a href="#Vive-Teleporter-简介" class="headerlink" title="Vive Teleporter 简介"></a>Vive Teleporter 简介</h2><p>这个是针对HTC Vive和引擎简单易用的瞬移系统。这个系统是模仿Valve的Vive游戏“The Lab”而作，即玩家可以穿过比游戏区域大的VR环境。</p><p>插件里提供了两个简单场景：一个直接集成了SteamVR，另一个适用于没有HTC Vive的小伙伴来演示系统功能。资源代码已经做了文档和注释，或者可以跟随MIT Licence（参照LICENSE.txt）使用.</p><a id="more"></a><p>下图是插件作者给出的系演示效果：</p><p><img src="/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/htc_vive_telport_movesystem.gif" alt=""></p><h2 id="使用本系统能够解决的问题"><a href="#使用本系统能够解决的问题" class="headerlink" title="使用本系统能够解决的问题"></a>使用本系统能够解决的问题</h2><h3 id="1-计算可导航空间"><a href="#1-计算可导航空间" class="headerlink" title="1.计算可导航空间"></a>1.计算可导航空间</h3><p>我们显然不希望玩家可以传送出边界，或者在不透明物体内部。为了解决这个问题，这个系统使用了Unity生成的导航网格作为玩家可以传送的边界。因为这个过程包括了Unity的工作，所以它很稳定并且可以放心的应用到大多数工程中。为了预加载这个数据，只需要在场景的任何位置添加一个”Vive Nav Mesh”组件，并且在检视面板点击”UpdateNavmesh Data”按钮。这样无论什么时候更新场景都可以用新的NavMesh烘焙来更新Vive Nav Mesh。上边的过程说明如下图：</p><h3 id="2-选择瞬移目的地"><a href="#2-选择瞬移目的地" class="headerlink" title="2.选择瞬移目的地"></a>2.选择瞬移目的地</h3><p>这个系统通过简单的运动学方程使用了直观的抛物线选择机制。再次说明，这是受到了Valve的“The Lab”启发。用户将控制器举到更高的角度时，选择点会生成的更远一些。如果用户将控制器举过45度（抛物线的最大距离），角度将会锁定在那个距离。</p><h3 id="3-表现游戏区域"><a href="#3-表现游戏区域" class="headerlink" title="3.表现游戏区域"></a>3.表现游戏区域</h3><p>很有必要知道传送后防护边界在哪里。因此系统围绕防护边界划定了一个盒子。</p><h3 id="4-减少不适感"><a href="#4-减少不适感" class="headerlink" title="4.减少不适感"></a>4.减少不适感</h3><p>瞬移（显示为“眨眼”）时屏幕的淡入淡出可降低用户的疲劳和眩晕感。</p><h2 id="瞬移系统使用到的三个组件"><a href="#瞬移系统使用到的三个组件" class="headerlink" title="瞬移系统使用到的三个组件"></a>瞬移系统使用到的三个组件</h2><p>在整个制作过程中，需要使用到三个组件：</p><h3 id="1-Vive-Nav-Mesh组件"><a href="#1-Vive-Nav-Mesh组件" class="headerlink" title="1) Vive Nav Mesh组件"></a>1) Vive Nav Mesh组件</h3><p>控制Unity的NavMesh系统到可渲染网格的转换。它还会计算NavMesh的边界，所以当玩家选择传送位置时可以被显示出来。</p><h3 id="2-Parabolic-Pointer组件"><a href="#2-Parabolic-Pointer组件" class="headerlink" title="2) Parabolic Pointer组件"></a>2) Parabolic Pointer组件</h3><p>生成/显示一个指示网格并从Vive Nav Mesh进行采样。</p><h3 id="3-Vive-Teleporter组件"><a href="#3-Vive-Teleporter组件" class="headerlink" title="3)Vive Teleporter组件"></a>3)Vive Teleporter组件</h3><p>控制实际传送机制。它从Parabolic Pointer找出指示数据这样就知道要传送到哪里。当用户决定传送时它还会平稳的淡入淡出屏幕防止带来的不适感。它还可以和SteamVR配合来控制按钮点击事件、控制器管理、触觉反馈，当选择传送位置后还可以显示传送区域边界。</p><p>注：Teleport Vive和Parabolic Pointer组件都会自动添加一个Border Renderer组件。Border Renderer仅仅生成并渲染出显示 ViveNav Mesh边界的网格和SteamVR游戏区域。</p><h2 id="实现瞬移系统"><a href="#实现瞬移系统" class="headerlink" title="实现瞬移系统"></a>实现瞬移系统</h2><h3 id="第一步：配置Vive-NavMesh"><a href="#第一步：配置Vive-NavMesh" class="headerlink" title="第一步：配置Vive NavMesh"></a>第一步：配置Vive NavMesh</h3><p>从添加Vive Nav Mesh对象开始，可以在Assets文件夹中的Vive-Teleporter/Prefabs/Navmesh.prefab路径下找到一个预配置的Vive NavMesh。可以将这个对象放在场景层级面板的任何地方和场景中的任何位置。<br>接下来需要在Unity中烘焙一个导航网格(“Navmesh”)。这个可以在Navigation窗口中完成(Window &gt; Navigation)。</p><p><img src="/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/20161021130742.png" alt=""></p><p>这里有几点需要考虑:  </p><ul><li><p>系统自动剔除斜坡导航网格三角形。这意味着任何没有直接面向上的部分的导航网格都会被传送系统忽略。这个在VR中是合理的，因为玩家不能走上斜坡！</p></li><li><p>必须在所以可传送表面使用物理碰撞器。抛物线的点（见下边第二步）使用物理射线来确定玩家指向。因此所有可传送表面必须有碰撞器（包括像墙这种不可传送的表面并且要阻止指示）。</p></li><li><p>为不可传送区域分配不同的导航区域也是个不错的主意。这个对于优化（因此当玩家选择传送位置时系统不需要渲染巨大的预览网格）和游戏平衡（这样玩家就不会传送到地图以外了）很有帮助。</p></li></ul><p>烘焙完导航网格之后（使用Navigation窗口底部的“Bake”按钮），回到之前创建的Vive Nav Mesh 对象。如果决定专用的导航区域（见上方），可以通过Area Mask属性选择那些区域是可传送的。然后点击检视面板中的“Update Navmesh Data”按钮，就会看到导航网格显示在场景视图中。</p><p><img src="/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/20161021130950.png" alt=""><br>Vive NavMesh效果</p><h3 id="第二步：配置ParabolicPointer"><a href="#第二步：配置ParabolicPointer" class="headerlink" title="第二步：配置ParabolicPointer"></a>第二步：配置ParabolicPointer</h3><p>接下来添加Parabolic Pointer 对象。可以在Assets文件夹中 Vive-Teleporter/Prefabs/Pointer.prefab路径下找到一个预配置的指针。可以将它放在场景层级面板的任何地方和场景中的任何位置。<br>你当然可以修改Parabolic Pointer脚本中的任何设置了，不过只允许设置其中的一个：配置从第一步的ViveNav Mesh对象到指针的“Nav Mesh”。</p><p><img src="/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/20161021131110.png" alt=""></p><h3 id="第三步：配置Vive-Teleporter"><a href="#第三步：配置Vive-Teleporter" class="headerlink" title="第三步：配置Vive Teleporter"></a>第三步：配置Vive Teleporter</h3><p>最后需要为SteamVR Camera添加一个Vive Teleporter （Component &gt; Vive Teleporter &gt; Vive Teleporter）组件。这是用来渲染Vive显示的摄像机。如果是使用了SteamVR 插件中的[CameraRig]预制件则应该将Vive Teleporter 添加给那个预制件中的Camera (eye) 对象。</p><p>接下来为组件属性配置以下值：</p><ul><li>Pointer：将这个设置为第二步创建的Parabolic Pointer 对象。</li><li>OriginTransform：将这个设置为追踪空间的起点。如果使用了SteamVR插件，这个就是[CameraRig] 游戏对象。当玩家传送时这个对象是实际移动的。</li><li>HeadTransform：将这个设置为玩家的头部。这个应该是Origin Transform的子集。如果使用了SteamVR插件，这个是Camera (head) 游戏对象。</li><li>Navmesh Animator：将这个设置为第一步创建的Vive Nav Mesh 对象的动画。</li><li>Fade Material：将这个设置为Vive-Teleporter/Art/Materials/FadeBlack.mat中的材质</li><li>Controllers：将SteamVR控制器对象填到这里。如果使用了SteamVR的 [CameraRig] 预制件，则应该将Controller(left) 和 Controller(right) 两个对象填到这里。</li></ul><p><img src="/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/20161021131145.png" alt=""></p><h3 id="第四步-运行测试"><a href="#第四步-运行测试" class="headerlink" title="第四步 运行测试"></a>第四步 运行测试</h3><p>运行后，通过按下手柄上的TouchPad进行瞬移操作。<br><img src="/2016/10/18/vr/00007_htc_vive_teleporter/htc_vive_teleporter/20161021131426.png" alt=""></p><h2 id="插件下载地址"><a href="#插件下载地址" class="headerlink" title="插件下载地址:"></a>插件下载地址:</h2><p>下载 <a href="https://github.com/Flafla2/Vive-Teleporter" target="_blank">Vive-Teleporter</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Vive-Teleporter-简介&quot;&gt;&lt;a href=&quot;#Vive-Teleporter-简介&quot; class=&quot;headerlink&quot; title=&quot;Vive Teleporter 简介&quot;&gt;&lt;/a&gt;Vive Teleporter 简介&lt;/h2&gt;&lt;p&gt;这个是针对HTC Vive和引擎简单易用的瞬移系统。这个系统是模仿Valve的Vive游戏“The Lab”而作，即玩家可以穿过比游戏区域大的VR环境。&lt;/p&gt;
&lt;p&gt;插件里提供了两个简单场景：一个直接集成了SteamVR，另一个适用于没有HTC Vive的小伙伴来演示系统功能。资源代码已经做了文档和注释，或者可以跟随MIT Licence（参照LICENSE.txt）使用.&lt;/p&gt;
    
    </summary>
    
      <category term="VR" scheme="http://www.felixwee.com/categories/VR/"/>
    
    
      <category term="VR" scheme="http://www.felixwee.com/tags/VR/"/>
    
      <category term="Vive Teleporter" scheme="http://www.felixwee.com/tags/Vive-Teleporter/"/>
    
  </entry>
  
  <entry>
    <title>NGUI组件之单选和复选框(CheckBox)</title>
    <link href="http://www.felixwee.com/2016/10/17/ngui/00006_ngui_toggle/Toggle/"/>
    <id>http://www.felixwee.com/2016/10/17/ngui/00006_ngui_toggle/Toggle/</id>
    <published>2016-10-17T12:37:51.000Z</published>
    <updated>2018-02-05T18:48:58.780Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Toggle简介"><a href="#Toggle简介" class="headerlink" title="Toggle简介"></a>Toggle简介</h2><p>Toggle组件经常用于制作具有两个状态的按钮，例如单选框，复选框，页签等。<br><a id="more"></a><br><img src="/2016/10/17/ngui/00006_ngui_toggle/Toggle/20160919171010.jpg" alt=""><br><img src="/2016/10/17/ngui/00006_ngui_toggle/Toggle/20160919171130.jpg" alt=""><br><img src="/2016/10/17/ngui/00006_ngui_toggle/Toggle/20160919171857.jpg" alt=""></p><p>制作Toggle按钮，通常需要用两个精灵来呈现，分别是背景图，选中时显示的图。方块图既为背景，对勾为选中是要显示的图。</p><h2 id="Toggle的方法"><a href="#Toggle的方法" class="headerlink" title="Toggle的方法"></a>Toggle的方法</h2><p>1) 创建Sprite用于显示背景框图。</p><p>2) 在背景图下继续创建Sprite显示对勾。</p><p>3）在背景图上添加BoxCollider。</p><p>4）在背景图上添加UIToggle组件，并将对勾图拖拽到Sprite属性上。</p><p><img src="/2016/10/17/ngui/00006_ngui_toggle/Toggle/20160919172511.jpg" alt=""></p><p>5)运行程序即可。</p><h2 id="Toggle常用属性"><a href="#Toggle常用属性" class="headerlink" title="Toggle常用属性"></a>Toggle常用属性</h2><ul><li>Group：默认为0，代表不分组。相同Group值得Toggle只能选中一个.</li><li>Starting State：即程序运行的时候Toggle是否为选中状态。</li><li>Animator/animation 过度的动画效果</li><li>Transition 点击状态改变时候的动画是否有过度效果<ul><li>Smooth:淡入淡出</li><li>Instant:立即出现或消失</li></ul></li><li>On Value Change<br>当Toggle状态发生改变时，调用的事件</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Toggle简介&quot;&gt;&lt;a href=&quot;#Toggle简介&quot; class=&quot;headerlink&quot; title=&quot;Toggle简介&quot;&gt;&lt;/a&gt;Toggle简介&lt;/h2&gt;&lt;p&gt;Toggle组件经常用于制作具有两个状态的按钮，例如单选框，复选框，页签等。&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="NGUI" scheme="http://www.felixwee.com/categories/NGUI/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="CheckBox" scheme="http://www.felixwee.com/tags/CheckBox/"/>
    
      <category term="单选按钮" scheme="http://www.felixwee.com/tags/%E5%8D%95%E9%80%89%E6%8C%89%E9%92%AE/"/>
    
      <category term="多选按钮" scheme="http://www.felixwee.com/tags/%E5%A4%9A%E9%80%89%E6%8C%89%E9%92%AE/"/>
    
      <category term="Toggle" scheme="http://www.felixwee.com/tags/Toggle/"/>
    
  </entry>
  
  <entry>
    <title>NGUI组件之滑动组件(Slider/ScrollBar/ProgressBar)</title>
    <link href="http://www.felixwee.com/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/"/>
    <id>http://www.felixwee.com/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/</id>
    <published>2016-10-16T12:37:51.000Z</published>
    <updated>2018-02-05T18:48:58.702Z</updated>
    
    <content type="html"><![CDATA[<h2 id="组件介绍"><a href="#组件介绍" class="headerlink" title="组件介绍"></a>组件介绍</h2><p>Slider组件</p><p><img src="/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920101745.jpg" alt=""><br><a id="more"></a><br>ScrollBar组件</p><p><img src="/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920101856.jpg" alt=""></p><p>ProgressBar组件</p><p><img src="/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920102018.jpg" alt=""></p><p>通过观察这三个组件的参数面板，看起来都比较相似。</p><h2 id="具体参数介绍"><a href="#具体参数介绍" class="headerlink" title="具体参数介绍"></a>具体参数介绍</h2><p>Value 滑块，滚动条，进度条的进度值（0-1）之间.</p><p>Size: 主要用于设置滚动条的长度大小</p><p>Alpha:整个组件的透明度值</p><p>Steps: 整个可变值得不仅数量  如果Steps设置为10，既将0-1分为10等份，Value的变化会以0.1进行增加或减小。</p><p>Appearance 外观设置</p><p>Foreground 前景元素<br>Background 背景图<br>Thumb 滑块<br>Direction :方向  分为垂直和水平两个大方向</p><h2 id="制作方法"><a href="#制作方法" class="headerlink" title="制作方法"></a>制作方法</h2><p>Slider组件</p><p><img src="/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920103620.jpg" alt=""></p><p>ScrollBar组件</p><p><img src="/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920103736.jpg" alt=""></p><p>ProgressBar组件</p><p><img src="/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920103848.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;组件介绍&quot;&gt;&lt;a href=&quot;#组件介绍&quot; class=&quot;headerlink&quot; title=&quot;组件介绍&quot;&gt;&lt;/a&gt;组件介绍&lt;/h2&gt;&lt;p&gt;Slider组件&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/10/16/ngui/00004_ngui_scrollbar/ScrollBarSliderProgressBar/20160920101745.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="NGUI" scheme="http://www.felixwee.com/categories/NGUI/"/>
    
    
      <category term="NGUI" scheme="http://www.felixwee.com/tags/NGUI/"/>
    
      <category term="Slider" scheme="http://www.felixwee.com/tags/Slider/"/>
    
      <category term="滑块" scheme="http://www.felixwee.com/tags/%E6%BB%91%E5%9D%97/"/>
    
      <category term="ScrollBar" scheme="http://www.felixwee.com/tags/ScrollBar/"/>
    
      <category term="滚动条" scheme="http://www.felixwee.com/tags/%E6%BB%9A%E5%8A%A8%E6%9D%A1/"/>
    
      <category term="进度条" scheme="http://www.felixwee.com/tags/%E8%BF%9B%E5%BA%A6%E6%9D%A1/"/>
    
      <category term="progressBar" scheme="http://www.felixwee.com/tags/progressBar/"/>
    
  </entry>
  
</feed>
